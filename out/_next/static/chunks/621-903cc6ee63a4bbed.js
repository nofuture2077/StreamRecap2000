(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{39977:function(e,t){var r="undefined"!=typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();(function(e){var t={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}function c(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function d(e){var t=new FileReader,r=c(t);return t.readAsArrayBuffer(e),r}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var r;t.arrayBuffer&&t.blob&&(r=e)&&DataView.prototype.isPrototypeOf(r)?(this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=h(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e,t,r,n=l(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=c(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},t.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=s(e),t=a(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[s(e)]},u.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},u.prototype.set=function(e,t){this.map[s(e)]=a(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),o(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),o(e)},t.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){var r,n,i=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new u(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),p.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},_.call(g.prototype),_.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var f=[301,302,303,307,308];y.redirect=function(e,t){if(-1===f.indexOf(t))throw RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.DOMException=n.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function v(r,n){return new Promise(function(i,s){var a=new g(r,n);if(a.signal&&a.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function l(){o.abort()}o.onload=function(){var e,t,r={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL"),i(new y("response"in o?o.response:o.responseText,r))},o.onerror=function(){s(TypeError("Network request failed"))},o.ontimeout=function(){s(TypeError("Network request failed"))},o.onabort=function(){s(new e.DOMException("Aborted","AbortError"))},o.open(a.method,a.url,!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&t.blob&&(o.responseType="blob"),a.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),a.signal&&(a.signal.addEventListener("abort",l),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",l)}),o.send(void 0===a._bodyInit?null:a._bodyInit)})}v.polyfill=!0,n.fetch||(n.fetch=v,n.Headers=u,n.Request=g,n.Response=y),e.Headers=u,e.Request=g,e.Response=y,e.fetch=v,Object.defineProperty(e,"__esModule",{value:!0})})({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill,(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t},16915:function(e){e.exports.U=!1},73002:function(e,t,r){"use strict";var n=String.prototype.replace,i=/%20/g,s=r(82037),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=s.assign({default:a.RFC3986,formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return String(e)}}},a)},52852:function(e,t,r){"use strict";var n=r(82037),i=Object.prototype.hasOwnProperty,s=Array.isArray,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t){if(s(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},l=function(e,t){var r={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,c),h=-1,_=t.charset;if(t.charsetSentinel)for(p=0;p<d.length;++p)0===d[p].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[p]?_="utf-8":"utf8=%26%2310003%3B"===d[p]&&(_="iso-8859-1"),h=p,p=d.length);for(p=0;p<d.length;++p)if(p!==h){var p,g,m,y=d[p],f=y.indexOf("]="),v=-1===f?y.indexOf("="):f+1;-1===v?(g=t.decoder(y,a.decoder,_,"key"),m=t.strictNullHandling?null:""):(g=t.decoder(y.slice(0,v),a.decoder,_,"key"),m=u(o(y.slice(v+1),t),function(e){return t.decoder(e,a.decoder,_,"value")})),m&&t.interpretNumericEntities&&"iso-8859-1"===_&&(m=m.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),y.indexOf("[]=")>-1&&(m=s(m)?[m]:m),i.call(r,g)?r[g]=n.combine(r[g],m):r[g]=m}return r},c=function(e,t,r,n){for(var i=n?t:o(t,r),s=e.length-1;s>=0;--s){var a,u=e[s];if("[]"===u&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var l="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,c=parseInt(l,10);r.parseArrays||""!==l?!isNaN(c)&&u!==l&&String(c)===l&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(a=[])[c]=i:a[l]=i:a={0:i}}i=a}return i},d=function(e,t,r,n){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=r.depth>0&&/(\[[^[\]]*])/.exec(s),u=o?s.slice(0,o.index):s,l=[];if(u){if(!r.plainObjects&&i.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var d=0;r.depth>0&&null!==(o=a.exec(s))&&d<r.depth;){if(d+=1,!r.plainObjects&&i.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(o[1])}return o&&l.push("["+s.slice(o.index)+"]"),c(l,t,r,n)}},h=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}};e.exports=function(e,t){var r=h(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var i="string"==typeof e?l(e,r):e,s=r.plainObjects?Object.create(null):{},a=Object.keys(i),o=0;o<a.length;++o){var u=a[o],c=d(u,i[u],r,"string"==typeof e);s=n.merge(s,c,r)}return n.compact(s)}},9244:function(e,t,r){"use strict";var n=r(82037),i=r(73002),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,u=Array.prototype.push,l=function(e,t){u.apply(e,o(t)?t:[t])},c=Date.prototype.toISOString,d=i.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:d,formatter:i.formatters[d],indices:!1,serializeDate:function(e){return c.call(e)},skipNulls:!1,strictNullHandling:!1},_=function e(t,r,i,s,a,u,c,d,_,p,g,m,y){var f,v,w=t;if("function"==typeof c?w=c(r,w):w instanceof Date?w=p(w):"comma"===i&&o(w)&&(w=w.join(",")),null===w){if(s)return u&&!m?u(r,h.encoder,y,"key"):r;w=""}if("string"==typeof(f=w)||"number"==typeof f||"boolean"==typeof f||"symbol"==typeof f||"bigint"==typeof f||n.isBuffer(w))return u?[g(m?r:u(r,h.encoder,y,"key"))+"="+g(u(w,h.encoder,y,"value"))]:[g(r)+"="+g(String(w))];var b=[];if(void 0===w)return b;if(o(c))v=c;else{var x=Object.keys(w);v=d?x.sort(d):x}for(var J=0;J<v.length;++J){var I=v[J];a&&null===w[I]||(o(w)?l(b,e(w[I],"function"==typeof i?i(r,I):r,i,s,a,u,c,d,_,p,g,m,y)):l(b,e(w[I],r+(_?"."+I:"["+I+"]"),i,s,a,u,c,d,_,p,g,m,y)))}return b},p=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!s.call(i.formatters,e.format))throw TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],a=h.filter;return("function"==typeof e.filter||o(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:void 0===e.delimiter?h.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:h.encode,encoder:"function"==typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:a,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}};e.exports=function(e,t){var r,n,i=e,s=p(t);"function"==typeof s.filter?i=(0,s.filter)("",i):o(s.filter)&&(r=s.filter);var u=[];if("object"!=typeof i||null===i)return"";n=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var c=a[n];r||(r=Object.keys(i)),s.sort&&r.sort(s.sort);for(var d=0;d<r.length;++d){var h=r[d];s.skipNulls&&null===i[h]||l(u,_(i[h],h,c,s.strictNullHandling,s.skipNulls,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.formatter,s.encodeValuesOnly,s.charset))}var g=u.join(s.delimiter),m=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),g.length>0?m+g:""}},82037:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(r(n)){for(var i=[],s=0;s<n.length;++s)void 0!==n[s]&&i.push(n[s]);t.obj[t.prop]=i}}},s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var s=t[n],a=s.obj[s.prop],o=Object.keys(a),u=0;u<o.length;++u){var l=o[u],c=a[l];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:a,prop:l}),r.push(c))}return i(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var i=e;if("symbol"==typeof e?i=Symbol.prototype.toString.call(e):"string"!=typeof e&&(i=String(e)),"iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var s="",a=0;a<i.length;++a){var o=i.charCodeAt(a);if(45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122){s+=i.charAt(a);continue}if(o<128){s+=n[o];continue}if(o<2048){s+=n[192|o>>6]+n[128|63&o];continue}if(o<55296||o>=57344){s+=n[224|o>>12]+n[128|o>>6&63]+n[128|63&o];continue}a+=1,s+=n[240|(o=65536+((1023&o)<<10|1023&i.charCodeAt(a)))>>18]+n[128|o>>12&63]+n[128|o>>6&63]+n[128|63&o]}return s},isBuffer:function(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(n,i,a){if(!i)return n;if("object"!=typeof i){if(r(n))n.push(i);else{if(!n||"object"!=typeof n)return[n,i];(a&&(a.plainObjects||a.allowPrototypes)||!t.call(Object.prototype,i))&&(n[i]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(i);var o=n;return(r(n)&&!r(i)&&(o=s(n,a)),r(n)&&r(i))?(i.forEach(function(r,i){if(t.call(n,i)){var s=n[i];s&&"object"==typeof s&&r&&"object"==typeof r?n[i]=e(s,r,a):n.push(r)}else n[i]=r}),n):Object.keys(i).reduce(function(r,n){var s=i[n];return t.call(r,n)?r[n]=e(r[n],s,a):r[n]=s,r},o)}}},21584:function(e,t,r){e.exports=r(51529)},51529:function(e,t,r){var n=r(17562);t.operation=function(e){return new n(t.timeouts(e),{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort(function(e,t){return e-t}),n},t.createTimeout=function(e,t){return Math.min(Math.round((t.randomize?Math.random()+1:1)*Math.max(t.minTimeout,1)*Math.pow(t.factor,e)),t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"==typeof e[i]&&n.push(i);for(var s=0;s<n.length;s++){var a=n[s],o=e[a];e[a]=(function(n){var i=t.operation(r),s=Array.prototype.slice.call(arguments,1),a=s.pop();s.push(function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))}),i.attempt(function(){n.apply(e,s)})}).bind(e,o),e[a].options=r}}},17562:function(e){function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(e[s]||0)+1;e[s]=a,a>=r&&(t=i,r=a)}return t}},14690:function(e,t,r){"use strict";r.d(t,{Pz:function(){return n}});var n=r(9244);r(52852),r(73002)},910:function(e,t,r){"use strict";function n(e){return void 0===e&&(e=!0),function(t,r){Object.defineProperty(t,r,{get:function(){},set:function(t){Object.defineProperty(this,r,{value:t,writable:!0,enumerable:e})},enumerable:e})}}r.d(t,{_:function(){return n}})},25143:function(e,t,r){"use strict";function n(e,t){return null==e?null:t(e)}function i(e,t){return null==e?void 0:t(e)}r.d(t,{Ge:function(){return n},yH:function(){return i}})},27677:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2265),i={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(e,t,r,s)=>{let a=(0,n.forwardRef)(({color:r="currentColor",size:a=24,stroke:o=2,className:u,children:l,...c},d)=>(0,n.createElement)("svg",{ref:d,...i[e],width:a,height:a,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),..."filled"===e?{fill:r}:{strokeWidth:o,stroke:r},...c},[...s.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(l)?l:[l]]));return a.displayName=`${r}`,a}},24830:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n=(0,r(27677).Z)("outline","arrow-back","IconArrowBack",[["path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1",key:"svg-0"}]])},62490:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n=(0,r(27677).Z)("outline","login","IconLogin",[["path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M21 12h-13l3 -3",key:"svg-1"}],["path",{d:"M11 15l-3 -3",key:"svg-2"}]])},57706:function(e,t,r){"use strict";r.d(t,{C:function(){return o},d:function(){return a}});var n=r(39977),i=r(14690),s=r(62677);async function a(e,t,r,s,a={},o){var u,l;let c;let d=null!==(u=e.type)&&void 0!==u?u:"helix",h=function(e,t,r){switch(t){case"helix":{let t=e.replace(/^\//,"");if(r){if("eventsub/subscriptions"===t)return`http://localhost:${r}/${t}`;return`http://localhost:${r}/mock/${t}`}return`https://api.twitch.tv/helix/${t}`}case"auth":return`https://id.twitch.tv/oauth2/${e.replace(/^\//,"")}`;default:return e}}(e.url,d,o),_=(0,i.Pz)(e.query,{arrayFormat:"repeat",addQueryPrefix:!0}),p=new n.Headers({Accept:"application/json"});e.jsonBody&&(c=JSON.stringify(e.jsonBody),p.append("Content-Type","application/json")),t&&"auth"!==d&&p.append("Client-ID",t),r&&p.append("Authorization",`${"helix"===d?null!=s?s:"Bearer":"OAuth"} ${r}`);let g={...a,method:null!==(l=e.method)&&void 0!==l?l:"GET",headers:p,body:c};return await n(`${h}${_}`,g)}async function o(e,t,r,n,i={}){let o=await a(e,t,r,n,i);return await (0,s.Z)(o,e),await (0,s.n)(o)}},6038:function(e,t,r){"use strict";r.d(t,{o:function(){return i}});var n=r(76159);class i extends n.s{constructor(e,t,r,n,i,s){super(`Encountered HTTP status code ${e}: ${t}

URL: ${r}
Method: ${n}
Body:
${!s&&i.length>150?`${i.slice(0,147)}...`:i}`),this._statusCode=e,this._url=r,this._method=n,this._body=i}get statusCode(){return this._statusCode}get url(){return this._url}get method(){return this._method}get body(){return this._body}}},62677:function(e,t,r){"use strict";r.d(t,{Z:function(){return s},n:function(){return a}});var n=r(14690),i=r(6038);async function s(e,t){var r;if(!e.ok){let s="application/json"===e.headers.get("Content-Type"),a=s?JSON.stringify(await e.json(),null,2):await e.text(),o=(0,n.Pz)(t.query,{arrayFormat:"repeat",addQueryPrefix:!0}),u=`${t.url}${o}`;throw new i.o(e.status,e.statusText,u,null!==(r=t.method)&&void 0!==r?r:"GET",a,s)}}async function a(e){if(204===e.status)return;let t=await e.text();if(t)return JSON.parse(t)}},56752:function(e,t,r){"use strict";r.d(t,{S:function(){return rE}});var n,i,s,a,o,u,l,c,d,h,_,p=r(73660),g=r(16915);function m(e){if("number"==typeof e){if(Object.prototype.hasOwnProperty.call(s,e))return e;var t=Object.keys(s).map(function(e){return parseInt(e,10)}).filter(function(t){return!isNaN(t)&&t<e});return t.length?Math.max.apply(Math,t):s.WARNING}var r=e.replace(/\d+$/,"").toUpperCase();if(!Object.prototype.hasOwnProperty.call(s,r))throw Error("Unknown log level string: ".concat(e));return s[r]}(n=s||(s={}))[n.CRITICAL=0]="CRITICAL",n[n.ERROR=1]="ERROR",n[n.WARNING=2]="WARNING",n[n.INFO=3]="INFO",n[n.DEBUG=4]="DEBUG",n[n.TRACE=7]="TRACE";var y=g.U?console.log.bind(console):console.debug.bind(console),f=((i={})[s.CRITICAL]=console.error.bind(console),i[s.ERROR]=console.error.bind(console),i[s.WARNING]=console.warn.bind(console),i[s.INFO]=console.info.bind(console),i[s.DEBUG]=y.bind(console),i[s.TRACE]=console.trace.bind(console),i),v=r(25143),w=r(49079),b=void 0===w?[]:null!==(o=null===(a=w.env.LOGGING)||void 0===a?void 0:a.split(";").map(function(e){var t=e.split("=",2),r=t[0],n=t[1];return n?["default"===r?void 0:r.split(":"),m(n)]:null}).filter(function(e){return!!e}).sort(function(e,t){var r,n,i=e[0],s=t[0];return(null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0)-(null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0)}))&&void 0!==o?o:[],x=b.findIndex(function(e){return!e[0]}),J=void 0;function I(e){for(var t=e.split(":"),r=0;r<b.length;r++){var n=b[r],i=n[0],s=n[1];if(function(e,t){return t.length<=e.length&&t.every(function(t,r){return t===e[r]})}(t,i))return s}return J}-1!==x&&(J=b[x][1],b.splice(x));var S=function(){function e(e){var t,r,n=e.name,i=e.minLevel,a=e.emoji,o=e.colors,u=e.timestamps,l=void 0===u?g.U:u;this._name=n,this._minLevel=null!==(r=null!==(t=(0,v.yH)(i,function(e){return m(e)}))&&void 0!==t?t:I(n))&&void 0!==r?r:s.WARNING,this._emoji=void 0!==a&&a,this._colors=o,this._timestamps=l}return e.prototype.crit=function(e){this.log(s.CRITICAL,e)},e.prototype.error=function(e){this.log(s.ERROR,e)},e.prototype.warn=function(e){this.log(s.WARNING,e)},e.prototype.info=function(e){this.log(s.INFO,e)},e.prototype.debug=function(e){this.log(s.DEBUG,e)},e.prototype.trace=function(e){this.log(s.TRACE,e)},e}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,p.ZT)(t,e),t.prototype.log=function(e,t){if(!(e>this._minLevel)){var r=f[e],n="[".concat(this._name,"] ").concat(t);this._timestamps&&(n="[".concat(new Date().toISOString(),"] ").concat(t)),r(n)}},t}(S),A=function(){function e(e){var t,r=e.name,n=e.minLevel,i=e.custom;this._minLevel=null!==(t=(0,v.yH)(n,function(e){return m(e)}))&&void 0!==t?t:I(r),this._override="function"==typeof i?{log:i}:i}return e.prototype.log=function(e,t){this._shouldLog(e)&&this._override.log(e,t)},e.prototype.crit=function(e){this._override.crit?this._shouldLog(s.CRITICAL)&&this._override.crit(e):this.log(s.CRITICAL,e)},e.prototype.error=function(e){this._override.error?this._shouldLog(s.ERROR)&&this._override.error(e):this.log(s.ERROR,e)},e.prototype.warn=function(e){this._override.warn?this._shouldLog(s.WARNING)&&this._override.warn(e):this.log(s.WARNING,e)},e.prototype.info=function(e){this._override.info?this._shouldLog(s.INFO)&&this._override.info(e):this.log(s.INFO,e)},e.prototype.debug=function(e){this._override.debug?this._shouldLog(s.DEBUG)&&this._override.debug(e):this.log(s.DEBUG,e)},e.prototype.trace=function(e){this._override.trace?this._shouldLog(s.TRACE)&&this._override.trace(e):this.log(s.TRACE,e)},e.prototype._shouldLog=function(e){return void 0===this._minLevel||this._minLevel>=e},e}(),B=r(49079),T=((u={})[s.CRITICAL]="\uD83D\uDED1",u[s.ERROR]="❌",u[s.WARNING]="⚠️ ",u[s.INFO]="ℹ️ ",u[s.DEBUG]="\uD83D\uDC1E",u[s.TRACE]="\uD83D\uDC3E",u),P={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37,blackBright:90,redBright:91,greenBright:92,yellowBright:93,blueBright:94,magentaBright:95,cyanBright:96,whiteBright:97},E={bgBlack:40,bgRed:41,bgGreen:42,bgYellow:43,bgBlue:44,bgMagenta:45,bgCyan:46,bgWhite:47,bgBlackBright:100,bgRedBright:101,bgGreenBright:102,bgYellowBright:103,bgBlueBright:104,bgMagentaBright:105,bgCyanBright:106,bgWhiteBright:107};function D(e,t,r){return function(n){return"\x1b[".concat(e,"m").concat(r?r(n):n,"\x1b[").concat(t,"m")}}function U(e){return D(P[e],39)}function q(e,t){return D(E[e],49,t)}var R=((l={})[s.CRITICAL]=U("red"),l[s.ERROR]=U("redBright"),l[s.WARNING]=U("yellow"),l[s.INFO]=U("blue"),l[s.DEBUG]=U("magenta"),l[s.TRACE]=D(0,0),l),k=((c={})[s.CRITICAL]=q("bgRed",U("white")),c[s.ERROR]=q("bgRedBright",U("white")),c[s.WARNING]=q("bgYellow",U("black")),c[s.INFO]=q("bgBlue",U("white")),c[s.DEBUG]=q("bgMagenta",U("black")),c[s.TRACE]=D(7,27),c),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,p.ZT)(t,e),t.prototype.log=function(e,t){if(!(e>this._minLevel)){var r,n,i,a=f[e],o="";if(this._timestamps&&(o+="[".concat(new Date().toISOString(),"] ")),this._emoji){var u=T[e];o+="".concat(u," ")}null===(i=null!==(r=this._colors)&&void 0!==r?r:null===(n=B.stdout)||void 0===n?void 0:n.isTTY)||void 0===i||i?o+="".concat(k[e](this._name)," ").concat(k[e](s[e])," ").concat(R[e](t)):o+="[".concat(this._name,":").concat(s[e].toLowerCase(),"] ").concat(t),a(o)}},t}(S);function N(e){return e.custom?new A(e):g.U?new O(e):new C(e)}class L extends Error{constructor(...e){var t;super(...e),Object.setPrototypeOf(this,new.target.prototype),null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}class j extends L{}class M extends L{constructor(e){super(`Need to retry after ${e} ms`),this._retryAt=Date.now()+e}get retryAt(){return this._retryAt}}class F{constructor({logger:e}){this._queue=[],this._batchRunning=!1,this._paused=!1,this._logger=N({name:"rate-limiter",emoji:!0,...e})}async request(e,t){return this._logger.trace("request start"),await new Promise((r,n)=>{var i;let s={req:e,resolve:r,reject:n,limitReachedBehavior:null!==(i=null==t?void 0:t.limitReachedBehavior)&&void 0!==i?i:"enqueue"};this._batchRunning||this._nextBatchTimer||this._paused?(this._logger.trace(`request queued batchRunning:${this._batchRunning.toString()} hasNextBatchTimer:${(!!this._nextBatchTimer).toString()} paused:${this._paused.toString()}`),this._queue.push(s)):this._runRequestBatch([s])})}clear(){this._queue=[]}pause(){this._paused=!0}resume(){this._paused=!1,this._runNextBatch()}get stats(){var e,t,r,n,i;return{lastKnownLimit:null!==(t=null===(e=this._parameters)||void 0===e?void 0:e.limit)&&void 0!==t?t:null,lastKnownRemainingRequests:null!==(n=null===(r=this._parameters)||void 0===r?void 0:r.remaining)&&void 0!==n?n:null,lastKnownResetDate:(0,v.Ge)(null===(i=this._parameters)||void 0===i?void 0:i.resetsAt,e=>new Date(e))}}async _runRequestBatch(e){this._logger.trace(`runRequestBatch start specs:${e.length}`),this._batchRunning=!0,this._parameters&&this._logger.debug(`Remaining requests: ${this._parameters.remaining}`),this._logger.debug(`Doing ${e.length} requests, new queue length is ${this._queue.length}`);let t=e.map(async e=>{let{req:t,resolve:r,reject:n}=e;try{let n=await this.doRequest(t),i=this.needsToRetryAfter(n);if(null!==i)throw this._queue.unshift(e),this._logger.info(`Retrying after ${i} ms`),new M(i);let s=this.getParametersFromResponse(n);return r(n),s}catch(e){if(e instanceof M)throw e;n(e);return}}),r=await Promise.allSettled(t),n=r.filter(e=>"rejected"===e.status),i=Date.now();if(n.length){this._logger.trace("runRequestBatch some rejected");let e=Math.max(i,...n.map(e=>e.reason.retryAt))-i;this._logger.warn(`Waiting for ${e} ms because the rate limit was exceeded`),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},e)}else{this._logger.trace("runRequestBatch none rejected");let e=r.filter(e=>"fulfilled"===e.status&&void 0!==e.value).map(e=>e.value).reduce((e,t)=>e?t.remaining<e.remaining?t:e:t,void 0);if(this._batchRunning=!1,e){if(this._parameters=e,e.resetsAt<i||e.remaining>0)this._logger.trace("runRequestBatch canRunMore"),this._runNextBatch();else{let t=e.resetsAt-i;this._logger.trace(`runRequestBatch delay:${t}`),this._logger.warn(`Waiting for ${t} ms because the rate limit was reached`),this._queue=this._queue.filter(e=>{switch(e.limitReachedBehavior){case"enqueue":return!0;case"null":return e.resolve(null),!1;case"throw":return e.reject(new j("Request removed from queue because the rate limit was reached")),!1;default:throw Error("this should never happen")}}),this._nextBatchTimer=setTimeout(()=>{this._parameters=void 0,this._runNextBatch()},t)}}}this._logger.trace("runRequestBatch end")}_runNextBatch(){if(this._paused)return;this._logger.trace("runNextBatch start"),this._nextBatchTimer&&(clearTimeout(this._nextBatchTimer),this._nextBatchTimer=void 0);let e=this._parameters?Math.min(this._parameters.remaining,this._parameters.limit/10):1,t=this._queue.splice(0,e);t.length&&this._runRequestBatch(t),this._logger.trace("runNextBatch end")}}class H{constructor(e){this._children=new Map,this._paused=!1,this._partitionKeyCallback=e.getPartitionKey,this._createChildCallback=e.createChild}async request(e,t){let r=this._partitionKeyCallback(e),n=this._getChild(r);return await n.request(e,t)}clear(){for(let e of this._children.values())e.clear()}pause(){for(let e of(this._paused=!0,this._children.values()))e.pause()}resume(){for(let e of(this._paused=!1,this._children.values()))e.resume()}getChildStats(e){if(!this._children.has(e))return null;let t=this._children.get(e);return t instanceof F?t.stats:null}_getChild(e){if(this._children.has(e))return this._children.get(e);let t=this._createChildCallback(e);return this._paused&&t.pause(),this._children.set(e,t),t}}class G{constructor({logger:e,bucketSize:t,timeFrame:r,doRequest:n,getPartitionKey:i}){this._partitionedQueue=new Map,this._usedFromBucket=new Map,this._paused=!1,this._logger=N({name:"rate-limiter",emoji:!0,...e}),this._bucketSize=t,this._timeFrame=r,this._callback=n,this._partitionKeyCallback=i}async request(e,t){return await new Promise((r,n)=>{var i,s;let a={req:e,resolve:r,reject:n,limitReachedBehavior:null!==(i=null==t?void 0:t.limitReachedBehavior)&&void 0!==i?i:"enqueue"},o=this._partitionKeyCallback(e),u=null!==(s=this._usedFromBucket.get(o))&&void 0!==s?s:0;if(u>=this._bucketSize||this._paused)switch(a.limitReachedBehavior){case"enqueue":{let e=this._getPartitionedQueue(o);e.push(a),u+e.length>=this._bucketSize?this._logger.warn(`Rate limit of ${this._bucketSize} for ${o?`partition ${o}`:"default partition"} was reached, waiting for ${this._paused?"the limiter to be unpaused":"a free bucket entry"}; queue size is ${e.length}`):this._logger.info(`Enqueueing request for ${o?`partition ${o}`:"default partition"} because the rate limiter is paused; queue size is ${e.length}`);break}case"null":a.resolve(null),this._paused?this._logger.info(`Returning null for request for ${o?`partition ${o}`:"default partition"} because the rate limiter is paused`):this._logger.warn(`Rate limit of ${this._bucketSize} for ${o?`partition ${o}`:"default partition"} was reached, dropping request and returning null`);break;case"throw":a.reject(new j(`Request dropped because ${this._paused?"the rate limiter is paused":`the rate limit for ${o?`partition ${o}`:"default partition"} was reached`}`));break;default:throw Error("this should never happen")}else this._runRequest(a,o)})}clear(){this._partitionedQueue.clear()}pause(){this._paused=!0}resume(){for(let e of(this._paused=!1,this._partitionedQueue.keys()))this._runNextRequest(e)}_getPartitionedQueue(e){if(this._partitionedQueue.has(e))return this._partitionedQueue.get(e);let t=[];return this._partitionedQueue.set(e,t),t}async _runRequest(e,t){var r;let n=this._getPartitionedQueue(t);this._logger.debug(`doing a request for ${t?`partition ${t}`:"default partition"}, new queue length is ${n.length}`),this._usedFromBucket.set(t,(null!==(r=this._usedFromBucket.get(t))&&void 0!==r?r:0)+1);let{req:i,resolve:s,reject:a}=e;try{s(await this._callback(i))}catch(e){a(e)}finally{setTimeout(()=>{let e=this._usedFromBucket.get(t)-1;this._usedFromBucket.set(t,e),n.length&&e<this._bucketSize&&this._runNextRequest(t)},this._timeFrame)}}_runNextRequest(e){if(this._paused)return;let t=this._getPartitionedQueue(e).shift();t&&this._runRequest(t,e)}}var $=r(57706);function V(e){return"string"==typeof e?e:"number"==typeof e?e.toString(10):e.id}function W(e){return"string"==typeof e?e:e.name}var z=r(22870),Q=r(76159);class K extends Q.s{}class Z extends F{async doRequest({options:e,clientId:t,accessToken:r,authorizationType:n,fetchOptions:i,mockServerPort:s}){return await (0,$.d)(e,t,r,n,i,s)}needsToRetryAfter(e){return 429!==e.status||e.headers.has("ratelimit-remaining")&&0!==Number(e.headers.get("ratelimit-remaining"))?null:1e3*+e.headers.get("ratelimit-reset")-Date.now()}getParametersFromResponse(e){let{headers:t}=e;return{limit:+t.get("ratelimit-limit"),remaining:+t.get("ratelimit-remaining"),resetsAt:1e3*+t.get("ratelimit-reset")}}}function Y(e){switch(typeof e){case"undefined":return"";case"object":{if(null===e)return"";if("cacheKey"in e)return e.cacheKey;let t=JSON.stringify(e);if("{}"!==t)return t}default:return e.toString()}}function X(e,t,r){return[e,...t.map(Y)].join("/")+(r?"/":"")}function ee(e=1/0){return function(t,r,n){if(n.get){let t=n.get;n.get=function(){let n=X(r,[]),i=this.getFromCache(n);if(i)return i;let s=t.call(this);return this.setCache(n,s,e),s}}return n}}let et=Symbol("cache");function er(e){var t,r;return r=class extends e{constructor(){super(...arguments),this[t]=new Map}getFromCache(e){if(this._cleanCache(),this[et].has(e)){let t=this[et].get(e);if(t)return t.value}}setCache(e,t,r){this[et].set(e,{value:t,expires:Date.now()+1e3*r})}removeFromCache(e,t){let r=this._getInternalCacheKey(e,t);t?this[et].forEach((e,t)=>{t.startsWith(r)&&this[et].delete(t)}):this[et].delete(r)}_cleanCache(){let e=Date.now();this[et].forEach((t,r)=>{t.expires<e&&this[et].delete(r)})}_getInternalCacheKey(e,t){if("string"!=typeof e)return X(e.shift(),e,t);{let t=e;return t.endsWith("/")||(t+="/"),t}}},t=et,r}function en(){var e,t;return{promise:new Promise(function(r,n){e=r,t=n}),resolve:e,reject:t}}class ei{constructor(e,t,r,n=!1){this.owner=e,this.event=t,this.listener=r,this._internal=n}unbind(){this.owner.removeListener(this)}}class es{constructor(){this._eventListeners=new Map,this._internalEventListeners=new Map}on(e,t){return this._addListener(!1,e,t)}addListener(e,t){return this._addListener(!1,e,t)}removeListener(e,t){this._removeListener(!1,e,t)}registerEvent(){let e=t=>this.addListener(e,t);return e}emit(e,...t){if(this._eventListeners.has(e))for(let r of this._eventListeners.get(e))r(...t);if(this._internalEventListeners.has(e))for(let r of this._internalEventListeners.get(e))r(...t)}registerInternalEvent(){let e=t=>this.addInternalListener(e,t);return e}addInternalListener(e,t){return this._addListener(!0,e,t)}removeInternalListener(e,t){this._removeListener(!0,e,t)}_addListener(e,t,r){let n=e?this._eventListeners:this._internalEventListeners;return n.has(t)?n.get(t).push(r):n.set(t,[r]),new ei(this,t,r,e)}_removeListener(e,t,r){let n=e?this._eventListeners:this._internalEventListeners;if(t){if("object"==typeof t)this._removeListener(t._internal,t.event,t.listener);else if(n.has(t)){if(r){let e=n.get(t),i=0;for(;-1!==(i=e.indexOf(r));)e.splice(i,1)}else n.delete(t)}}else n.clear()}}var ea=r(6038),eo=r(62677),eu=r(40321),el=r(60340);function ec(e){var t;return null!==(t=(0,v.Ge)((0,v.Ge)(e.expiresIn,t=>e.obtainmentTimestamp+1e3*t-6e4),e=>Date.now()>e))&&void 0!==t&&t}class ed extends Q.s{constructor(e){super(`${e} - this should never happen, please file a bug in the GitHub issue tracker`)}}var eh=r(21584);function e_(e){return{broadcaster_id:V(e)}}var ep=r(910);class eg{constructor(e){this._client=e}_getUserContextIdWithDefault(e){var t;return null!==(t=this._client._getUserIdFromRequestContext(e))&&void 0!==t?t:e}}(0,p.gn)([(0,ep._)(!1)],eg.prototype,"_client",void 0);var em=r(78734);class ey extends Q.s{constructor(){super("Relation returned null - this may be a library bug or a race condition in your own code")}}function ef(e){if(null==e)throw new ey;return e}let ev=class extends em.Lo{constructor(e,t){super(e),this._client=t}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}get rank(){return this[em.J_].rank}get amount(){return this[em.J_].score}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}};(0,p.gn)([(0,ep._)(!1)],ev.prototype,"_client",void 0),ev=(0,p.gn)([(0,z.P)("api","HelixBitsLeaderboardEntry","userId")],ev);let ew=class extends em.Lo{constructor(e,t){super(e),this._client=t}get entries(){return this[em.J_].data.map(e=>new ev(e,this._client))}get totalCount(){return this[em.J_].total}};function eb(e,t){if("function"!=typeof t){var r=t;t=function(e){return e[r].toString()}}return Object.assign.apply(Object,(0,p.ev)([{}],(0,p.CR)(e.map(function(e){var r;return(r={})[t(e)]=e,r})),!1))}(0,p.gn)([(0,ep._)(!1)],ew.prototype,"_client",void 0),(0,p.gn)([ee()],ew.prototype,"entries",null),ew=(0,p.gn)([er,(0,z.P)("api","HelixBitsLeaderboard")],ew);let ex=class extends em.Lo{constructor(e){super(eb(e,e=>e.prefix.toLowerCase()))}getCheermoteDisplayInfo(e,t,r){e=e.toLowerCase();let{background:n,state:i,scale:s}=r,{tiers:a}=this[em.J_][e],o=a.sort((e,t)=>t.min_bits-e.min_bits).find(e=>e.min_bits<=t);if(!o)throw new ed(`Cheermote "${e}" does not have an applicable tier for ${t} bits`);return{url:o.images[n][i][s],color:o.color}}getPossibleNames(){return Object.keys(this[em.J_])}};ex=(0,p.gn)([(0,z.P)("api","HelixCheermoteList")],ex);let eJ=class extends eg{async getLeaderboard(e,t={}){let r=await this._client.callApi({type:"helix",url:"bits/leaderboard",userId:V(e),scopes:["bits:read"],query:function(e={}){let{count:t=10,period:r="all",startDate:n,contextUserId:i}=e;return{count:t.toString(),period:r,started_at:null==n?void 0:n.toISOString(),user_id:i}}(t)});return new ew(r,this._client)}async getCheermotes(e){let t=await this._client.callApi({type:"helix",url:"bits/cheermotes",userId:(0,v.yH)(e,V),query:(0,v.yH)(e,e_)});return new ex(t.data)}};function eI(e,t){return{broadcaster_id:V(e),user_id:V(t)}}function eS(e,t){return{broadcaster_id:V(e),user_id:(0,v.yH)(t,V)}}function eC(e,t){return{broadcaster_id:(0,v.yH)(t,V),user_id:V(e)}}function eA(e,t){return{[e]:t}}function eB(e){return{user_id:V(e)}}function eT(e,t){return{broadcaster_id:e,moderator_id:t}}function eP(e,t){return{broadcaster_id:V(e),id:t}}function eE(e,t){return{broadcaster_id:V(e),user_id:t.map(V)}}eJ=(0,p.gn)([(0,z.P)("api","HelixBitsApi")],eJ);let eD=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].user_id}get name(){return this[em.J_].user_login}get displayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}};(0,p.gn)([(0,ep._)(!1)],eD.prototype,"_client",void 0),eD=(0,p.gn)([(0,z.P)("api","HelixUserRelation","id")],eD);class eU{constructor(e,t,r,n,i,s=100){this._callOptions=e,this._queryParamName=t,this._matchKey=r,this._mapper=i,this._limitPerRequest=s,this._requestedIds=[],this._requestResolversById=new Map,this._waitTimer=null,this._client=n,this._delay=n._batchDelay}async request(e){let{promise:t,resolve:r,reject:n}=en();return this._requestedIds.includes(e)||this._requestedIds.push(e),this._requestResolversById.has(e)?this._requestResolversById.get(e).push({resolve:r,reject:n}):this._requestResolversById.set(e,[{resolve:r,reject:n}]),this._waitTimer&&(clearTimeout(this._waitTimer),this._waitTimer=null),this._requestedIds.length>=this._limitPerRequest?this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest)):this._waitTimer=setTimeout(()=>{this._handleBatch(this._requestedIds.splice(0,this._limitPerRequest))},this._delay),await t}async _handleBatch(e){var t;try{let{data:r}=await this._doRequest(e),n=eb(r,this._matchKey);for(let r of e){for(let e of null!==(t=this._requestResolversById.get(r))&&void 0!==t?t:[])Object.prototype.hasOwnProperty.call(n,r)?e.resolve(this._mapper(n[r])):e.resolve(null);this._requestResolversById.delete(r)}}catch(t){await Promise.all(e.map(async e=>{var t,r;try{let r=await this._doRequest([e]);for(let n of null!==(t=this._requestResolversById.get(e))&&void 0!==t?t:[])n.resolve(r.data.length?this._mapper(r.data[0]):null)}catch(t){for(let n of null!==(r=this._requestResolversById.get(e))&&void 0!==r?r:[])n.reject(t)}this._requestResolversById.delete(e)}))}}async _doRequest(e){return await this._client.callApi({type:"helix",...this._callOptions,query:{...this._callOptions.query,[this._queryParamName]:e}})}}(0,p.gn)([(0,ep._)(!1)],eU.prototype,"_client",void 0),Object.prototype.hasOwnProperty.call(Symbol,"asyncIterator")||(Symbol.asyncIterator=null!==(d=Symbol.asyncIterator)&&void 0!==d?d:Symbol.for("Symbol.asyncIterator"));let eq=class{constructor(e,t,r,n=100){this._callOptions=e,this._mapper=r,this._limitPerPage=n,this._isFinished=!1,this._client=t}get current(){var e;return null===(e=this._currentData)||void 0===e?void 0:e.data}async getNext(){var e;if(this._isFinished)return[];let t=await this._fetchData();return(null===(e=t.data)||void 0===e?void 0:e.length)?this._processResult(t):(this._isFinished=!0,[])}async getAll(){this.reset();let e=[];do{let t=await this.getNext();if(!t.length)break;e.push(...t)}while(this._currentCursor);return this.reset(),e}get currentCursor(){return this._currentCursor}reset(){this._currentCursor=void 0,this._isFinished=!1,this._currentData=void 0}async *[Symbol.asyncIterator](){for(this.reset();;){let e=await this.getNext();if(!e.length)break;yield*e[Symbol.iterator]()}}async _fetchData(e={}){return await this._client.callApi({type:"helix",...this._callOptions,...e,query:{...this._callOptions.query,after:this._currentCursor,first:this._limitPerPage.toString(),...e.query}})}_processResult(e){var t;return this._currentCursor="string"==typeof e.pagination?e.pagination:null===(t=e.pagination)||void 0===t?void 0:t.cursor,void 0===this._currentCursor&&(this._isFinished=!0),this._currentData=e,e.data.reduce((e,t)=>{let r=this._mapper(t);return Array.isArray(r)?[...e,...r]:[...e,r]},[])}};(0,p.gn)([(0,ep._)(!1)],eq.prototype,"_client",void 0),eq=(0,p.gn)([(0,z.P)("api","HelixPaginatedRequest")],eq);let eR=class extends eq{async getTotalCount(){var e;return(null!==(e=this._currentData)&&void 0!==e?e:await this._fetchData({query:{after:void 0}})).total}};function ek(e,t,r){var n;let i;return{get data(){var s,a;return null!=i?i:i=null!==(a=null===(s=e.data)||void 0===s?void 0:s.map(e=>new t(e,r)))&&void 0!==a?a:[]},cursor:"string"==typeof e.pagination?e.pagination:null===(n=e.pagination)||void 0===n?void 0:n.cursor}}function eO(e,t,r){let n;return{get data(){var i,s;return null!=n?n:n=null!==(s=null===(i=e.data)||void 0===i?void 0:i.map(e=>new t(e,r)))&&void 0!==s?s:[]},cursor:e.pagination.cursor,total:e.total}}function eN({after:e,before:t,limit:r}={}){return{after:e,before:t,first:null==r?void 0:r.toString()}}eR=(0,p.gn)([(0,z.P)("api","HelixPaginatedRequestWithTotal")],eR);let eL=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].broadcaster_id}get name(){return this[em.J_].broadcaster_login}get displayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get language(){return this[em.J_].broadcaster_language}get gameId(){return this[em.J_].game_id}get gameName(){return this[em.J_].game_name}async getGame(){return this[em.J_].game_id?ef(await this._client.games.getGameById(this[em.J_].game_id)):null}get title(){return this[em.J_].title}get delay(){return this[em.J_].delay}get tags(){return this[em.J_].tags}get contentClassificationLabels(){return this[em.J_].content_classification_labels}get isBrandedContent(){return this[em.J_].is_branded_content}};(0,p.gn)([(0,ep._)(!1)],eL.prototype,"_client",void 0),eL=(0,p.gn)([(0,z.P)("api","HelixChannel","id")],eL);let ej=class extends em.Lo{constructor(e,t){super(e),this._client=t}get userId(){return this[em.J_].user_id}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}get creationDate(){return new Date(this[em.J_].created_at)}};(0,p.gn)([(0,ep._)(!1)],ej.prototype,"_client",void 0),ej=(0,p.gn)([(0,z.P)("api","HelixChannelEditor","userId")],ej);let eM=class extends em.Lo{constructor(e,t){super(e),this._client=t}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}get followDate(){return new Date(this[em.J_].followed_at)}};(0,p.gn)([(0,ep._)(!1)],eM.prototype,"_client",void 0),eM=(0,p.gn)([(0,z.P)("api","HelixChannelFollower","userId")],eM);let eF=class extends em.Lo{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get followDate(){return new Date(this[em.J_].followed_at)}};(0,p.gn)([(0,ep._)(!1)],eF.prototype,"_client",void 0),eF=(0,p.gn)([(0,z.P)("api","HelixFollowedChannel","broadcasterId")],eF);let eH=class extends em.Lo{get snoozeCount(){return this[em.J_].snooze_count}get snoozeRefreshDate(){return new Date(1e3*this[em.J_].snooze_refresh_at)}get nextAdDate(){return new Date(1e3*this[em.J_].next_ad_at)}get duration(){return this[em.J_].duration}get lastAdDate(){return new Date(1e3*this[em.J_].last_ad_at)}get prerollFreeTime(){return this[em.J_].preroll_free_time}};eH=(0,p.gn)([(0,z.P)("api","HelixAdSchedule")],eH);let eG=class extends em.Lo{get snoozeCount(){return this[em.J_].snooze_count}get snoozeRefreshDate(){return new Date(1e3*this[em.J_].snooze_refresh_at)}get nextAdDate(){return new Date(1e3*this[em.J_].next_ad_at)}};eG=(0,p.gn)([(0,z.P)("api","HelixSnoozeNextAdResult")],eG);let e$=class extends eg{constructor(){super(...arguments),this._getChannelByIdBatcher=new eU({url:"channels"},"broadcaster_id","broadcaster_id",this._client,e=>new eL(e,this._client))}async getChannelInfoById(e){let t=V(e),r=await this._client.callApi({type:"helix",url:"channels",userId:t,query:e_(t)});return(0,v.Ge)(r.data[0],e=>new eL(e,this._client))}async getChannelInfoByIdBatched(e){return await this._getChannelByIdBatcher.request(V(e))}async getChannelInfoByIds(e){let t=e.map(V);return(await this._client.callApi({type:"helix",url:"channels",query:eA("broadcaster_id",t)})).data.map(e=>new eL(e,this._client))}async updateChannelInfo(e,t){var r;await this._client.callApi({type:"helix",url:"channels",method:"PATCH",userId:V(e),scopes:["channel:manage:broadcast"],query:e_(e),jsonBody:{game_id:t.gameId,broadcaster_language:t.language,title:t.title,delay:null===(r=t.delay)||void 0===r?void 0:r.toString(),tags:t.tags,content_classification_labels:t.contentClassificationLabels,is_branded_content:t.isBrandedContent}})}async startChannelCommercial(e,t){await this._client.callApi({type:"helix",url:"channels/commercial",method:"POST",userId:V(e),scopes:["channel:edit:commercial"],jsonBody:{broadcaster_id:V(e),length:t}})}async getChannelEditors(e){return(await this._client.callApi({type:"helix",url:"channels/editors",userId:V(e),scopes:["channel:read:editors"],query:e_(e)})).data.map(e=>new ej(e,this._client))}async getVips(e,t){return ek(await this._client.callApi({type:"helix",url:"channels/vips",userId:V(e),scopes:["channel:read:vips","channel:manage:vips"],query:{...e_(e),...eN(t)}}),eD,this._client)}getVipsPaginated(e){return new eq({url:"channels/vips",userId:V(e),scopes:["channel:read:vips","channel:manage:vips"],query:e_(e)},this._client,e=>new eD(e,this._client))}async checkVipForUsers(e,t){return(await this._client.callApi({type:"helix",url:"channels/vips",userId:V(e),scopes:["channel:read:vips","channel:manage:vips"],query:eE(e,t)})).data.map(e=>new eD(e,this._client))}async checkVipForUser(e,t){let r=V(t);return(await this.checkVipForUsers(e,[r])).some(e=>e.id===r)}async addVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"POST",userId:V(e),scopes:["channel:manage:vips"],query:eI(e,t)})}async removeVip(e,t){await this._client.callApi({type:"helix",url:"channels/vips",method:"DELETE",userId:V(e),scopes:["channel:manage:vips"],query:eI(e,t)})}async getChannelFollowerCount(e){return(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:V(e),query:{...eS(e),...eN({limit:1})}})).total}async getChannelFollowers(e,t,r){return eO(await this._client.callApi({type:"helix",url:"channels/followers",method:"GET",userId:V(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:{...eS(e,t),...eN(r)}}),eM,this._client)}getChannelFollowersPaginated(e){return new eR({url:"channels/followers",method:"GET",userId:V(e),canOverrideScopedUserContext:!0,scopes:["moderator:read:followers"],query:eS(e)},this._client,e=>new eM(e,this._client))}async getFollowedChannels(e,t,r){return eO(await this._client.callApi({type:"helix",url:"channels/followed",method:"GET",userId:V(e),scopes:["user:read:follows"],query:{...eC(e,t),...eN(r)}}),eF,this._client)}getFollowedChannelsPaginated(e,t){return new eR({url:"channels/followed",method:"GET",userId:V(e),scopes:["user:read:follows"],query:eC(e,t)},this._client,e=>new eF(e,this._client))}async getAdSchedule(e){let t=await this._client.callApi({type:"helix",url:"channels/ads",method:"GET",userId:V(e),scopes:["channel:read:ads"],query:e_(e)});return new eH(t.data[0])}async snoozeNextAd(e){let t=await this._client.callApi({type:"helix",url:"channels/ads/schedule/snooze",method:"POST",userId:V(e),scopes:["channel:manage:ads"],query:e_(e)});return new eG(t.data[0])}};function eV(e,t){return{broadcaster_id:V(e),id:t}}function eW(e){var t,r,n;let i={title:e.title,cost:e.cost,prompt:e.prompt,background_color:e.backgroundColor,is_enabled:e.isEnabled,is_user_input_required:e.userInputRequired,should_redemptions_skip_request_queue:e.autoFulfill};return void 0!==e.maxRedemptionsPerStream&&(i.is_max_per_stream_enabled=!!e.maxRedemptionsPerStream,i.max_per_stream=null!==(t=e.maxRedemptionsPerStream)&&void 0!==t?t:0),void 0!==e.maxRedemptionsPerUserPerStream&&(i.is_max_per_user_per_stream_enabled=!!e.maxRedemptionsPerUserPerStream,i.max_per_user_per_stream=null!==(r=e.maxRedemptionsPerUserPerStream)&&void 0!==r?r:0),void 0!==e.globalCooldown&&(i.is_global_cooldown_enabled=!!e.globalCooldown,i.global_cooldown_seconds=null!==(n=e.globalCooldown)&&void 0!==n?n:0),"isPaused"in e&&(i.is_paused=e.isPaused),i}function ez(e,t,r){return{broadcaster_id:V(e),reward_id:t,id:r}}function eQ(e,t,r,n){return{broadcaster_id:V(e),reward_id:t,status:r,sort:n.newestFirst?"NEWEST":"OLDEST"}}(0,p.gn)([(0,ep._)(!1)],e$.prototype,"_getChannelByIdBatcher",void 0),e$=(0,p.gn)([(0,z.P)("api","HelixChannelApi")],e$);let eK=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}getImageUrl(e){var t,r;let n=`url_${e}x`;return null!==(r=null===(t=this[em.J_].image)||void 0===t?void 0:t[n])&&void 0!==r?r:this[em.J_].default_image[n]}get backgroundColor(){return this[em.J_].background_color}get isEnabled(){return this[em.J_].is_enabled}get cost(){return this[em.J_].cost}get title(){return this[em.J_].title}get prompt(){return this[em.J_].prompt}get userInputRequired(){return this[em.J_].is_user_input_required}get maxRedemptionsPerStream(){return this[em.J_].max_per_stream_setting.is_enabled?this[em.J_].max_per_stream_setting.max_per_stream:null}get maxRedemptionsPerUserPerStream(){return this[em.J_].max_per_user_per_stream_setting.is_enabled?this[em.J_].max_per_user_per_stream_setting.max_per_user_per_stream:null}get globalCooldown(){return this[em.J_].global_cooldown_setting.is_enabled?this[em.J_].global_cooldown_setting.global_cooldown_seconds:null}get isPaused(){return this[em.J_].is_paused}get isInStock(){return this[em.J_].is_in_stock}get redemptionsThisStream(){return this[em.J_].redemptions_redeemed_current_stream}get autoFulfill(){return this[em.J_].should_redemptions_skip_request_queue}get cooldownExpiryDate(){return this[em.J_].cooldown_expires_at?new Date(this[em.J_].cooldown_expires_at):null}};(0,p.gn)([(0,ep._)(!1)],eK.prototype,"_client",void 0),eK=(0,p.gn)([(0,z.P)("api","HelixCustomReward","id")],eK);let eZ=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}get userInput(){return this[em.J_].user_input}get isFulfilled(){return"FULFILLED"===this[em.J_].status}get isCanceled(){return"CANCELED"===this[em.J_].status}get redemptionDate(){return new Date(this[em.J_].redeemed_at)}get rewardId(){return this[em.J_].reward.id}get rewardTitle(){return this[em.J_].reward.title}get rewardPrompt(){return this[em.J_].reward.prompt}get rewardCost(){return this[em.J_].reward.cost}async getReward(){return ef(await this._client.channelPoints.getCustomRewardById(this[em.J_].broadcaster_id,this[em.J_].reward.id))}async updateStatus(e){return(await this._client.channelPoints.updateRedemptionStatusByIds(this[em.J_].broadcaster_id,this[em.J_].reward.id,[this[em.J_].id],e))[0]}};(0,p.gn)([(0,ep._)(!1)],eZ.prototype,"_client",void 0),eZ=(0,p.gn)([(0,z.P)("api","HelixCustomRewardRedemption","id")],eZ);let eY=class extends eg{async getCustomRewards(e,t){return(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:V(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{broadcaster_id:V(e),only_manageable_rewards:null==t?void 0:t.toString()}})).data.map(e=>new eK(e,this._client))}async getCustomRewardsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",userId:V(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:eP(e,t)})).data.map(e=>new eK(e,this._client)):[]}async getCustomRewardById(e,t){let r=await this.getCustomRewardsByIds(e,[t]);return r.length?r[0]:null}async createCustomReward(e,t){let r=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"POST",userId:V(e),scopes:["channel:manage:redemptions"],query:e_(e),jsonBody:eW(t)});return new eK(r.data[0],this._client)}async updateCustomReward(e,t,r){let n=await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"PATCH",userId:V(e),scopes:["channel:manage:redemptions"],query:eV(e,t),jsonBody:eW(r)});return new eK(n.data[0],this._client)}async deleteCustomReward(e,t){await this._client.callApi({type:"helix",url:"channel_points/custom_rewards",method:"DELETE",userId:V(e),scopes:["channel:manage:redemptions"],query:eV(e,t)})}async getRedemptionsByIds(e,t,r){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:V(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:ez(e,t,r)})).data.map(e=>new eZ(e,this._client)):[]}async getRedemptionById(e,t,r){let n=await this.getRedemptionsByIds(e,t,[r]);return n.length?n[0]:null}async getRedemptionsForBroadcaster(e,t,r,n){return ek(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",userId:V(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:{...eQ(e,t,r,n),...eN(n)}}),eZ,this._client)}getRedemptionsForBroadcasterPaginated(e,t,r,n){return new eq({url:"channel_points/custom_rewards/redemptions",userId:V(e),scopes:["channel:read:redemptions","channel:manage:redemptions"],query:eQ(e,t,r,n)},this._client,e=>new eZ(e,this._client),50)}async updateRedemptionStatusByIds(e,t,r,n){return r.length?(await this._client.callApi({type:"helix",url:"channel_points/custom_rewards/redemptions",method:"PATCH",userId:V(e),scopes:["channel:manage:redemptions"],query:ez(e,t,r),jsonBody:{status:n}})).data.map(e=>new eZ(e,this._client)):[]}};eY=(0,p.gn)([(0,z.P)("api","HelixChannelPointsApi")],eY);let eX=class extends em.Lo{get value(){return this[em.J_].value}get decimalPlaces(){return this[em.J_].decimal_places}get localizedValue(){return this.value/10**this.decimalPlaces}get currency(){return this[em.J_].currency}};eX=(0,p.gn)([(0,z.P)("api","HelixCharityCampaignAmount")],eX);let e0=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get charityName(){return this[em.J_].charity_name}get charityDescription(){return this[em.J_].charity_description}get charityLogo(){return this[em.J_].charity_logo}get charityWebsite(){return this[em.J_].charity_website}get currentAmount(){return new eX(this[em.J_].current_amount)}get targetAmount(){return new eX(this[em.J_].target_amount)}};(0,p.gn)([(0,ep._)(!1)],e0.prototype,"_client",void 0),e0=(0,p.gn)([(0,z.P)("api","HelixCharityCampaign","id")],e0);let e1=class extends em.Lo{constructor(e,t){super(e),this._client=t}get campaignId(){return this[em.J_].campaign_id}get donorId(){return this[em.J_].user_id}get donorName(){return this[em.J_].user_login}get donorDisplayName(){return this[em.J_].user_name}async getDonor(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}get amount(){return new eX(this[em.J_].amount)}};(0,p.gn)([(0,ep._)(!1)],e1.prototype,"_client",void 0),e1=(0,p.gn)([(0,z.P)("api","HelixCharityCampaignDonation")],e1);let e2=class extends eg{async getCharityCampaign(e){let t=await this._client.callApi({type:"helix",url:"charity/campaigns",method:"GET",userId:V(e),scopes:["channel:read:charity"],query:e_(e)});return new e0(t.data[0],this._client)}async getCharityCampaignDonations(e,t){return ek(await this._client.callApi({type:"helix",url:"charity/donations",userId:V(e),scopes:["channel:read:charity"],query:{...e_(e),...eN(t)}}),e1,this._client)}};function e3(e,t){return{broadcaster_id:e,sender_id:t}}function e8(e,t){return{message:e,reply_parent_message_id:null==t?void 0:t.replyParentMessageId}}e2=(0,p.gn)([(0,z.P)("api","HelixCharityApi")],e2);let e4=class extends em.Lo{get id(){return this[em.J_].id}get name(){return this[em.J_].name}get formats(){return this[em.J_].format}get scales(){return this[em.J_].scale}get themeModes(){return this[em.J_].theme_mode}getImageUrl(e){return this[em.J_].images[`url_${e}x`]}getStaticImageUrl(e="1.0",t="light"){return this[em.J_].format.includes("static")&&this[em.J_].scale.includes(e)?this.getFormattedImageUrl(e,"static",t):null}getAnimatedImageUrl(e="1.0",t="light"){return this[em.J_].format.includes("animated")&&this[em.J_].scale.includes(e)?this.getFormattedImageUrl(e,"animated",t):null}getFormattedImageUrl(e="1.0",t="static",r="light"){return`https://static-cdn.jtvnw.net/emoticons/v2/${this[em.J_].id}/${t}/${r}/${e}`}};e4=(0,p.gn)([(0,z.P)("api","HelixEmote","id")],e4);let e6=class extends e4{constructor(e,t){super(e),this._client=t}get tier(){return this[em.J_].tier||null}get type(){return this[em.J_].emote_type}get emoteSetId(){return this[em.J_].emote_set_id}async getAllEmotesFromSet(){return await this._client.chat.getEmotesFromSets([this[em.J_].emote_set_id])}};(0,p.gn)([(0,ep._)(!1)],e6.prototype,"_client",void 0),e6=(0,p.gn)([(0,z.P)("api","HelixChannelEmote","id")],e6);let e7=class extends em.Lo{get id(){return this[em.J_].id}getImageUrl(e){return this[em.J_][`image_url_${e}x`]}get title(){return this[em.J_].title}get description(){return this[em.J_].description}get clickAction(){return this[em.J_].click_action}get clickUrl(){return this[em.J_].click_url}};e7=(0,p.gn)([(0,z.P)("api","HelixChatBadgeVersion","id")],e7);let e9=class extends em.Lo{get id(){return this[em.J_].set_id}get versions(){return this[em.J_].versions.map(e=>new e7(e))}getVersion(e){var t;return null!==(t=this.versions.find(t=>t.id===e))&&void 0!==t?t:null}};(0,p.gn)([ee()],e9.prototype,"versions",null),e9=(0,p.gn)([er,(0,z.P)("api","HelixChatBadgeSet","id")],e9);let e5=class extends em.Lo{constructor(e,t){super(e),this._client=t}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}};(0,p.gn)([(0,ep._)(!1)],e5.prototype,"_client",void 0),e5=(0,p.gn)([(0,z.P)("api","HelixChatChatter")],e5);let te=class extends em.Lo{get broadcasterId(){return this[em.J_].broadcaster_id}get slowModeEnabled(){return this[em.J_].slow_mode}get slowModeDelay(){return this[em.J_].slow_mode_wait_time}get followerOnlyModeEnabled(){return this[em.J_].follower_mode}get followerOnlyModeDelay(){return this[em.J_].follower_mode_duration}get subscriberOnlyModeEnabled(){return this[em.J_].subscriber_mode}get emoteOnlyModeEnabled(){return this[em.J_].emote_mode}get uniqueChatModeEnabled(){return this[em.J_].unique_chat_mode}};te=(0,p.gn)([(0,z.P)("api","HelixChatSettings","broadcasterId")],te);let tt=class extends e4{constructor(e,t){super(e),this._client=t}get type(){return this[em.J_].emote_type}get emoteSetId(){return this[em.J_].emote_set_id}get ownerId(){switch(this[em.J_].owner_id){case"0":case"twitch":return null;default:return this[em.J_].owner_id}}async getOwner(){switch(this[em.J_].owner_id){case"0":case"twitch":return null;default:return await this._client.users.getUserById(this[em.J_].owner_id)}}};(0,p.gn)([(0,ep._)(!1)],tt.prototype,"_client",void 0),tt=(0,p.gn)([(0,z.P)("api","HelixEmoteFromSet","id")],tt);let tr=class extends te{get nonModeratorChatDelayEnabled(){return this[em.J_].non_moderator_chat_delay}get nonModeratorChatDelay(){return this[em.J_].non_moderator_chat_delay_duration}};tr=(0,p.gn)([(0,z.P)("api","HelixPrivilegedChatSettings","broadcasterId")],tr);let tn=class extends em.Lo{get id(){return this[em.J_].message_id}get isSent(){return this[em.J_].is_sent}get dropReasonCode(){var e;return null===(e=this[em.J_].drop_reason)||void 0===e?void 0:e.code}get dropReasonMessage(){var e;return null===(e=this[em.J_].drop_reason)||void 0===e?void 0:e.message}};tn=(0,p.gn)([(0,z.P)("api","HelixSentChatMessage","id")],tn);let ti=class extends eg{async getChatters(e,t){let r=V(e);return eO(await this._client.callApi({type:"helix",url:"chat/chatters",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:{...this._createModeratorActionQuery(r),...eN(t)}}),e5,this._client)}getChattersPaginated(e){let t=V(e);return new eR({url:"chat/chatters",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chatters"],query:this._createModeratorActionQuery(t)},this._client,e=>new e5(e,this._client),1e3)}async getGlobalBadges(){return(await this._client.callApi({type:"helix",url:"chat/badges/global"})).data.map(e=>new e9(e))}async getChannelBadges(e){return(await this._client.callApi({type:"helix",url:"chat/badges",userId:V(e),query:e_(e)})).data.map(e=>new e9(e))}async getGlobalEmotes(){return(await this._client.callApi({type:"helix",url:"chat/emotes/global"})).data.map(e=>new e4(e))}async getChannelEmotes(e){return(await this._client.callApi({type:"helix",url:"chat/emotes",userId:V(e),query:e_(e)})).data.map(e=>new e6(e,this._client))}async getEmotesFromSets(e){return(await this._client.callApi({type:"helix",url:"chat/emotes/set",query:eA("emote_set_id",e)})).data.map(e=>new tt(e,this._client))}async getSettings(e){let t=await this._client.callApi({type:"helix",url:"chat/settings",userId:V(e),query:e_(e)});return new te(t.data[0])}async getSettingsPrivileged(e){let t=V(e),r=await this._client.callApi({type:"helix",url:"chat/settings",userId:t,canOverrideScopedUserContext:!0,scopes:["moderator:read:chat_settings"],query:this._createModeratorActionQuery(t)});return new tr(r.data[0])}async updateSettings(e,t){let r=V(e),n=await this._client.callApi({type:"helix",url:"chat/settings",method:"PATCH",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:chat_settings"],query:this._createModeratorActionQuery(r),jsonBody:{slow_mode:t.slowModeEnabled,slow_mode_wait_time:t.slowModeDelay,follower_mode:t.followerOnlyModeEnabled,follower_mode_duration:t.followerOnlyModeDelay,subscriber_mode:t.subscriberOnlyModeEnabled,emote_mode:t.emoteOnlyModeEnabled,unique_chat_mode:t.uniqueChatModeEnabled,non_moderator_chat_delay:t.nonModeratorChatDelayEnabled,non_moderator_chat_delay_duration:t.nonModeratorChatDelay}});return new tr(n.data[0])}async sendChatMessage(e,t,r){let n=V(e),i=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",userId:n,canOverrideScopedUserContext:!0,scopes:["user:write:chat"],query:e3(n,this._getUserContextIdWithDefault(n)),jsonBody:e8(t,r)});return new tn(i.data[0])}async sendChatMessageAsApp(e,t,r,n){let i=V(e),s=V(t),a=await this._client.callApi({type:"helix",url:"chat/messages",method:"POST",forceType:"app",query:e3(s,i),jsonBody:e8(r,n)});return new tn(a.data[0])}async sendAnnouncement(e,t){let r=V(e);await this._client.callApi({type:"helix",url:"chat/announcements",method:"POST",userId:r,canOverrideScopedUserContext:!0,scopes:["moderator:manage:announcements"],query:this._createModeratorActionQuery(r),jsonBody:{message:t.message,color:t.color}})}async getColorsForUsers(e){let t=await this._client.callApi({type:"helix",url:"chat/color",query:eA("user_id",e.map(V))});return new Map(t.data.map(e=>[e.user_id,e.color||null]))}async getColorForUser(e){let t=await this._client.callApi({type:"helix",url:"chat/color",userId:V(e),query:eA("user_id",V(e))});if(t.data.length)return t.data[0].color||null}async setColorForUser(e,t){await this._client.callApi({type:"helix",url:"chat/color",method:"PUT",userId:V(e),scopes:["user:manage:chat_color"],query:{user_id:V(e),color:t}})}async shoutoutUser(e,t){var r;let n=V(e);await this._client.callApi({type:"helix",url:"chat/shoutouts",method:"POST",userId:n,canOverrideScopedUserContext:!0,scopes:["moderator:manage:shoutouts"],query:(r=this._getUserContextIdWithDefault(n),{from_broadcaster_id:V(e),to_broadcaster_id:V(t),moderator_id:r})})}_createModeratorActionQuery(e){return eT(e,this._getUserContextIdWithDefault(e))}};function ts(e){let{filterType:t,ids:r,startDate:n,endDate:i,isFeatured:s}=e;return{[t]:r,started_at:n,ended_at:i,is_featured:null==s?void 0:s.toString()}}ti=(0,p.gn)([(0,z.P)("api","HelixChatApi")],ti);let ta=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get url(){return this[em.J_].url}get embedUrl(){return this[em.J_].embed_url}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get creatorId(){return this[em.J_].creator_id}get creatorDisplayName(){return this[em.J_].creator_name}async getCreator(){return ef(await this._client.users.getUserById(this[em.J_].creator_id))}get videoId(){return this[em.J_].video_id}async getVideo(){return ef(await this._client.videos.getVideoById(this[em.J_].video_id))}get gameId(){return this[em.J_].game_id}async getGame(){return this[em.J_].game_id?ef(await this._client.games.getGameById(this[em.J_].game_id)):null}get language(){return this[em.J_].language}get title(){return this[em.J_].title}get views(){return this[em.J_].view_count}get creationDate(){return new Date(this[em.J_].created_at)}get thumbnailUrl(){return this[em.J_].thumbnail_url}get duration(){return this[em.J_].duration}get vodOffset(){return this[em.J_].vod_offset}get isFeatured(){return this[em.J_].is_featured}};(0,p.gn)([(0,ep._)(!1)],ta.prototype,"_client",void 0),ta=(0,p.gn)([(0,z.P)("api","HelixClip","id")],ta);let to=class extends eg{constructor(){super(...arguments),this._getClipByIdBatcher=new eU({url:"clips"},"id","id",this._client,e=>new ta(e,this._client))}async getClipsForBroadcaster(e,t={}){return await this._getClips({...t,filterType:"broadcaster_id",ids:V(e),userId:V(e)})}getClipsForBroadcasterPaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"broadcaster_id",ids:V(e),userId:V(e)})}async getClipsForGame(e,t={}){return await this._getClips({...t,filterType:"game_id",ids:e})}getClipsForGamePaginated(e,t={}){return this._getClipsPaginated({...t,filterType:"game_id",ids:e})}async getClipsByIds(e){return(await this._getClips({filterType:"id",ids:e})).data}async getClipById(e){let t=await this.getClipsByIds([e]);return t.length?t[0]:null}async getClipByIdBatched(e){return await this._getClipByIdBatcher.request(e)}async createClip(e){let{channel:t,createAfterDelay:r=!1}=e;return(await this._client.callApi({type:"helix",url:"clips",method:"POST",userId:V(t),scopes:["clips:edit"],canOverrideScopedUserContext:!0,query:{broadcaster_id:V(t),has_delay:r.toString()}})).data[0].id}async _getClips(e){return e.ids.length?ek(await this._client.callApi({type:"helix",url:"clips",userId:e.userId,query:{...ts(e),...eN(e)}}),ta,this._client):{data:[]}}_getClipsPaginated(e){return new eq({url:"clips",userId:e.userId,query:ts(e)},this._client,e=>new ta(e,this._client))}};(0,p.gn)([(0,ep._)(!1)],to.prototype,"_getClipByIdBatcher",void 0),to=(0,p.gn)([(0,z.P)("api","HelixClipApi")],to);class tu extends em.Lo{get id(){return this[em.J_].id}get name(){return this[em.J_].name}get description(){return this[em.J_].description}}let tl=class extends eg{async getAll(e){return(await this._client.callApi({url:"content_classification_labels",query:{locale:e}})).data.map(e=>new tu(e))}};function tc(e,t){return{user_id:t?(0,v.yH)(e.user,V):void 0,game_id:e.gameId,fulfillment_status:e.fulfillmentStatus}}tl=(0,p.gn)([(0,z.P)("api","HelixContentClassificationLabelApi")],tl);let td=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get rewardId(){return this[em.J_].benefit_id}get grantDate(){return new Date(this[em.J_].timestamp)}get userId(){return this[em.J_].user_id}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}get gameId(){return this[em.J_].game_id}async getGame(){return ef(await this._client.games.getGameById(this[em.J_].game_id))}get fulfillmentStatus(){return this[em.J_].fulfillment_status}get updateDate(){return new Date(this[em.J_].last_updated)}};(0,p.gn)([(0,ep._)(!1)],td.prototype,"_client",void 0),td=(0,p.gn)([(0,z.P)("api","HelixDropsEntitlement")],td);let th=class extends eg{constructor(){super(...arguments),this._getDropsEntitlementByIdBatcher=new eU({url:"entitlements/drops"},"id","id",this._client,e=>new td(e,this._client))}async getDropsEntitlements(e,t=!1){return ek(await this._client.callApi({type:"helix",url:"entitlements/drops",userId:(0,v.yH)(e.user,V),forceType:e.user&&t?"app":void 0,query:{...tc(e,t),...eN(e)}}),td,this._client)}getDropsEntitlementsPaginated(e,t=!1){return new eq({url:"entitlements/drops",userId:(0,v.yH)(e.user,V),forceType:e.user&&t?"app":void 0,query:tc(e,t)},this._client,e=>new td(e,this._client))}async getDropsEntitlementsByIds(e){return(await this._client.callApi({type:"helix",url:"entitlements/drops",query:{id:e}})).data.map(e=>new td(e,this._client))}async getDropsEntitlementById(e){var t;return null!==(t=(await this.getDropsEntitlementsByIds([e]))[0])&&void 0!==t?t:null}async getDropsEntitlementByIdBatched(e){return await this._getDropsEntitlementByIdBatcher.request(e)}async updateDropsEntitlements(e,t){let r=await this._client.callApi({type:"helix",url:"entitlements/drops",method:"PATCH",jsonBody:{fulfillment_status:t,entitlement_ids:e}});return new Map(r.data.flatMap(e=>e.ids.map(t=>[t,e.status])))}};function t_(e){return{broadcaster_user_id:V(e)}}function tp(e,t){return{broadcaster_user_id:V(e),reward_id:t}}function tg(e,t){return{broadcaster_user_id:e,moderator_user_id:t}}function tm(e,t){return{broadcaster_user_id:e,user_id:t}}function ty(e,t){return{conduit_id:e,status:t}}(0,p.gn)([(0,ep._)(!1)],th.prototype,"_getDropsEntitlementByIdBatcher",void 0),th=(0,p.gn)([(0,z.P)("api","HelixEntitlementApi")],th);let tf=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get status(){return this[em.J_].status}get type(){return this[em.J_].type}get cost(){return this[em.J_].cost}get condition(){return this[em.J_].condition}get creationDate(){return new Date(this[em.J_].created_at)}get transportMethod(){return this[em.J_].transport.method}async unsubscribe(){await this._client.eventSub.deleteSubscription(this[em.J_].id)}get _transport(){return this[em.J_].transport}set _status(e){this[em.J_].status=e}};(0,p.gn)([(0,ep._)(!1)],tf.prototype,"_client",void 0),tf=(0,p.gn)([(0,z.P)("api","HelixEventSubSubscription","id")],tf);let tv=class extends eR{constructor(e,t,r){super({url:"eventsub/subscriptions",userId:t,query:e},r,e=>new tf(e,r))}async getTotalCost(){var e;return(null!==(e=this._currentData)&&void 0!==e?e:await this._fetchData({query:{after:void 0}})).total_cost}async getMaxTotalCost(){var e;return(null!==(e=this._currentData)&&void 0!==e?e:await this._fetchData({query:{after:void 0}})).max_total_cost}};tv=(0,p.gn)([(0,z.P)("api","HelixPaginatedEventSubSubscriptionsRequest")],tv);let tw=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get shardCount(){return this[em.J_].shard_count}async update(e){return await this._client.eventSub.updateConduit(this[em.J_].id,e)}async delete(){await this._client.eventSub.deleteConduit(this[em.J_].id)}async getShards(){return await this._client.eventSub.getConduitShards(this[em.J_].id)}};(0,p.gn)([(0,ep._)(!1)],tw.prototype,"_client",void 0),tw=(0,p.gn)([(0,z.P)("api","HelixEventSubConduit")],tw);let tb=class extends em.Lo{get id(){return this[em.J_].id}get status(){return this[em.J_].status}get transportMethod(){return this[em.J_].transport.method}};tb=(0,p.gn)([(0,z.P)("api","HelixEventSubConduitShard")],tb);let tx=class extends eg{async getSubscriptions(e){let t=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:eN(e)});return{...eO(t,tf,this._client),totalCost:t.total_cost,maxTotalCost:t.max_total_cost}}getSubscriptionsPaginated(){return new tv({},void 0,this._client)}async getSubscriptionsForStatus(e,t){let r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...eN(t),status:e}});return{...eO(r,tf,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForStatusPaginated(e){return new tv({status:e},void 0,this._client)}async getSubscriptionsForType(e,t){let r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",query:{...eN(t),type:e}});return{...eO(r,tf,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForTypePaginated(e){return new tv({type:e},void 0,this._client)}async getSubscriptionsForUser(e,t){let r=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",userId:V(e),query:{...eA("user_id",V(e)),...eN(t)}});return{...eO(r,tf,this._client),totalCost:r.total_cost,maxTotalCost:r.max_total_cost}}getSubscriptionsForUserPaginated(e){let t=V(e);return new tv(eA("user_id",t),t,this._client)}async createSubscription(e,t,r,n,i,s,a,o){let u="webhook"===n.method||"conduit"===n.method;if(!u&&!i)throw Error(`Transport ${n.method} can only handle subscriptions with user context`);let l={type:e,version:t,condition:r,transport:n};o&&(l.is_batching_enabled=!0);let c=await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"POST",scopes:u?void 0:s,userId:(0,v.yH)(i,V),canOverrideScopedUserContext:a,forceType:u?"app":"user",jsonBody:l});return new tf(c.data[0],this._client)}async deleteSubscription(e){await this._client.callApi({type:"helix",url:"eventsub/subscriptions",method:"DELETE",query:{id:e}})}async deleteAllSubscriptions(){await this._deleteSubscriptionsWithCondition()}async deleteBrokenSubscriptions(){await this._deleteSubscriptionsWithCondition(e=>"enabled"!==e.status&&"webhook_callback_verification_pending"!==e.status)}async subscribeToStreamOnlineEvents(e,t){return await this.createSubscription("stream.online","1",t_(e),t,e)}async subscribeToStreamOfflineEvents(e,t){return await this.createSubscription("stream.offline","1",t_(e),t,e)}async subscribeToChannelUpdateEvents(e,t){return await this.createSubscription("channel.update","1",t_(e),t,e)}async subscribeToChannelFollowEvents(e,t){let r=V(e);return await this.createSubscription("channel.follow","2",tg(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:followers"],!0)}async subscribeToChannelSubscriptionEvents(e,t){return await this.createSubscription("channel.subscribe","1",t_(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionGiftEvents(e,t){return await this.createSubscription("channel.subscription.gift","1",t_(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionMessageEvents(e,t){return await this.createSubscription("channel.subscription.message","1",t_(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelSubscriptionEndEvents(e,t){return await this.createSubscription("channel.subscription.end","1",t_(e),t,e,["channel:read:subscriptions"])}async subscribeToChannelCheerEvents(e,t){return await this.createSubscription("channel.cheer","1",t_(e),t,e,["bits:read"])}async subscribeToChannelCharityCampaignStartEvents(e,t){return await this.createSubscription("channel.charity_campaign.start","1",t_(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignStopEvents(e,t){return await this.createSubscription("channel.charity_campaign.stop","1",t_(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityDonationEvents(e,t){return await this.createSubscription("channel.charity_campaign.donate","1",t_(e),t,e,["channel:read:charity"])}async subscribeToChannelCharityCampaignProgressEvents(e,t){return await this.createSubscription("channel.charity_campaign.progress","1",t_(e),t,e,["channel:read:charity"])}async subscribeToChannelBanEvents(e,t){return await this.createSubscription("channel.ban","1",t_(e),t,e,["channel:moderate"])}async subscribeToChannelUnbanEvents(e,t){return await this.createSubscription("channel.unban","1",t_(e),t,e,["channel:moderate"])}async subscribeToChannelShieldModeBeginEvents(e,t){let r=V(e);return await this.createSubscription("channel.shield_mode.begin","1",tg(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelShieldModeEndEvents(e,t){let r=V(e);return await this.createSubscription("channel.shield_mode.end","1",tg(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shield_mode","moderator:manage:shield_mode"],!0)}async subscribeToChannelModeratorAddEvents(e,t){return await this.createSubscription("channel.moderator.add","1",t_(e),t,e,["moderation:read"])}async subscribeToChannelModeratorRemoveEvents(e,t){return await this.createSubscription("channel.moderator.remove","1",t_(e),t,e,["moderation:read"])}async subscribeToChannelRaidEventsFrom(e,t){return await this.createSubscription("channel.raid","1",eA("from_broadcaster_user_id",V(e)),t,e)}async subscribeToChannelRaidEventsTo(e,t){return await this.createSubscription("channel.raid","1",eA("to_broadcaster_user_id",V(e)),t,e)}async subscribeToChannelRewardAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.add","1",t_(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.update","1",t_(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.update","1",tp(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",t_(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRewardRemoveEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward.remove","1",tp(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",t_(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionAddEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.add","1",tp(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEvents(e,t){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",t_(e),t,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelRedemptionUpdateEventsForReward(e,t,r){return await this.createSubscription("channel.channel_points_custom_reward_redemption.update","1",tp(e,t),r,e,["channel:read:redemptions","channel:manage:redemptions"])}async subscribeToChannelPollBeginEvents(e,t){return await this.createSubscription("channel.poll.begin","1",t_(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollProgressEvents(e,t){return await this.createSubscription("channel.poll.progress","1",t_(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPollEndEvents(e,t){return await this.createSubscription("channel.poll.end","1",t_(e),t,e,["channel:read:polls","channel:manage:polls"])}async subscribeToChannelPredictionBeginEvents(e,t){return await this.createSubscription("channel.prediction.begin","1",t_(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionProgressEvents(e,t){return await this.createSubscription("channel.prediction.progress","1",t_(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionLockEvents(e,t){return await this.createSubscription("channel.prediction.lock","1",t_(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelPredictionEndEvents(e,t){return await this.createSubscription("channel.prediction.end","1",t_(e),t,e,["channel:read:predictions","channel:manage:predictions"])}async subscribeToChannelGoalBeginEvents(e,t){return await this.createSubscription("channel.goal.begin","1",t_(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalProgressEvents(e,t){return await this.createSubscription("channel.goal.progress","1",t_(e),t,e,["channel:read:goals"])}async subscribeToChannelGoalEndEvents(e,t){return await this.createSubscription("channel.goal.end","1",t_(e),t,e,["channel:read:goals"])}async subscribeToChannelHypeTrainBeginEvents(e,t){return await this.createSubscription("channel.hype_train.begin","1",t_(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainProgressEvents(e,t){return await this.createSubscription("channel.hype_train.progress","1",t_(e),t,e,["channel:read:hype_train"])}async subscribeToChannelHypeTrainEndEvents(e,t){return await this.createSubscription("channel.hype_train.end","1",t_(e),t,e,["channel:read:hype_train"])}async subscribeToChannelShoutoutCreateEvents(e,t){let r=V(e);return await this.createSubscription("channel.shoutout.create","1",tg(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelShoutoutReceiveEvents(e,t){let r=V(e);return await this.createSubscription("channel.shoutout.receive","1",tg(r,this._getUserContextIdWithDefault(r)),t,r,["moderator:read:shoutouts","moderator:manage:shoutouts"],!0)}async subscribeToChannelAdBreakBeginEvents(e,t){return await this.createSubscription("channel.ad_break.begin","1",t_(e),t,e,["channel:read:ads"])}async subscribeToChannelChatClearEvents(e,t){let r=V(e);return await this.createSubscription("channel.chat.clear","1",tm(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatClearUserMessagesEvents(e,t){let r=V(e);return await this.createSubscription("channel.chat.clear_user_messages","1",tm(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageDeleteEvents(e,t){let r=V(e);return await this.createSubscription("channel.chat.message_delete","1",tm(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatNotificationEvents(e,t){let r=V(e);return await this.createSubscription("channel.chat.notification","1",tm(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatMessageEvents(e,t){let r=V(e);return await this.createSubscription("channel.chat.message","1",tm(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToChannelChatSettingsUpdateEvents(e,t){let r=V(e);return await this.createSubscription("channel.chat_settings.update","1",tm(r,this._getUserContextIdWithDefault(r)),t,e,["user:read:chat"],!0)}async subscribeToExtensionBitsTransactionCreateEvents(e,t){return await this.createSubscription("extension.bits_transaction.create","1",eA("extension_client_id",e),t)}async subscribeToUserAuthorizationGrantEvents(e,t){return await this.createSubscription("user.authorization.grant","1",eA("client_id",e),t)}async subscribeToUserAuthorizationRevokeEvents(e,t){return await this.createSubscription("user.authorization.revoke","1",eA("client_id",e),t)}async subscribeToUserUpdateEvents(e,t,r){return await this.createSubscription("user.update","1",eA("user_id",V(e)),t,e,r?["user:read:email"]:void 0)}async subscribeToDropEntitlementGrantEvents(e,t){return await this.createSubscription("drop.entitlement.grant","1",{organization_id:e.organizationId,category_id:e.categoryId,campaign_id:e.campaignId},t,void 0,void 0,!1,!0)}async getConduits(){return(await this._client.callApi({type:"helix",url:"eventsub/conduits"})).data.map(e=>new tw(e,this._client))}async createConduit(e){let t=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"POST",query:{...eA("shard_count",e.toString())}});return new tw(t.data[0],this._client)}async updateConduit(e,t){let r=await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"PATCH",query:{id:e,shard_count:t.toString()}});return new tw(r.data[0],this._client)}async deleteConduit(e){await this._client.callApi({type:"helix",url:"eventsub/conduits",method:"DELETE",query:{...eA("id",e)}})}async getConduitShards(e,t,r){return{...ek(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",query:{...ty(e,t),...eN(r)}}),tb,this._client)}}getConduitShardsPaginated(e,t){return new eq({url:"eventsub/conduits/shards",query:ty(e,t)},this._client,e=>new tb(e))}async updateConduitShards(e,t){return(await this._client.callApi({type:"helix",url:"eventsub/conduits/shards",method:"PATCH",jsonBody:{conduit_id:e,shards:t}})).data.map(e=>new tb(e))}async _deleteSubscriptionsWithCondition(e){for await(let t of this.getSubscriptionsPaginated())(!e||e(t))&&await t.unsubscribe()}};tx=(0,p.gn)([(0,z.P)("api","HelixEventSubApi")],tx);let tJ=class extends em.Lo{get authorName(){return this[em.J_].author_name}get bitsEnabled(){return this[em.J_].bits_enabled}get installable(){return this[em.J_].can_install}get configurationLocation(){return this[em.J_].configuration_location}get description(){return this[em.J_].description}get tosUrl(){return this[em.J_].eula_tos_url}get hasChatSupport(){return this[em.J_].has_chat_support}get iconUrl(){return this[em.J_].icon_url}getIconUrl(e){return this[em.J_].icon_urls[e]}get id(){return this[em.J_].id}get name(){return this[em.J_].name}get privacyPolicyUrl(){return this[em.J_].privacy_policy_url}get requestsIdentityLink(){return this[em.J_].request_identity_link}get screenshotUrls(){return this[em.J_].screenshot_urls}get state(){return this[em.J_].state}get subscriptionsSupportLevel(){return this[em.J_].subscriptions_support_level}get summary(){return this[em.J_].summary}get supportEmail(){return this[em.J_].support_email}get version(){return this[em.J_].version}get viewerSummery(){return this[em.J_].viewer_summary}get allowedConfigUrls(){return this[em.J_].allowlisted_config_urls}get allowedPanelUrls(){return this[em.J_].allowlisted_panel_urls}get mobileViewerUrl(){var e,t;return null!==(t=null===(e=this[em.J_].views.mobile)||void 0===e?void 0:e.viewer_url)&&void 0!==t?t:null}get panelViewerUrl(){var e,t;return null!==(t=null===(e=this[em.J_].views.panel)||void 0===e?void 0:e.viewer_url)&&void 0!==t?t:null}get panelHeight(){var e,t;return null!==(t=null===(e=this[em.J_].views.panel)||void 0===e?void 0:e.height)&&void 0!==t?t:null}get panelCanLinkExternalContent(){var e,t;return null!==(t=null===(e=this[em.J_].views.panel)||void 0===e?void 0:e.can_link_external_content)&&void 0!==t?t:null}get overlayViewerUrl(){var e,t;return null!==(t=null===(e=this[em.J_].views.video_overlay)||void 0===e?void 0:e.viewer_url)&&void 0!==t?t:null}get overlayCanLinkExternalContent(){var e,t;return null!==(t=null===(e=this[em.J_].views.video_overlay)||void 0===e?void 0:e.can_link_external_content)&&void 0!==t?t:null}get componentViewerUrl(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.viewer_url)&&void 0!==t?t:null}get componentAspectWidth(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.aspect_width)&&void 0!==t?t:null}get componentAspectHeight(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.aspect_height)&&void 0!==t?t:null}get componentAspectRatioX(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.aspect_ratio_x)&&void 0!==t?t:null}get componentAspectRatioY(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.aspect_ratio_y)&&void 0!==t?t:null}get componentAutoScales(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.autoscale)&&void 0!==t?t:null}get componentScalePixels(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.scale_pixels)&&void 0!==t?t:null}get componentTargetHeight(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.target_height)&&void 0!==t?t:null}get componentSize(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.size)&&void 0!==t?t:null}get componentZoom(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.zoom)&&void 0!==t?t:null}get componentZoomPixels(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.zoom_pixels)&&void 0!==t?t:null}get componentCanLinkExternalContent(){var e,t;return null!==(t=null===(e=this[em.J_].views.component)||void 0===e?void 0:e.can_link_external_content)&&void 0!==t?t:null}get configViewerUrl(){var e,t;return null!==(t=null===(e=this[em.J_].views.config)||void 0===e?void 0:e.viewer_url)&&void 0!==t?t:null}get configCanLinkExternalContent(){var e,t;return null!==(t=null===(e=this[em.J_].views.config)||void 0===e?void 0:e.can_link_external_content)&&void 0!==t?t:null}};function tI(e,t){return{extension_id:e,id:t.transactionIds}}tJ=(0,p.gn)([(0,z.P)("api","HelixExtension","id")],tJ);let tS=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].broadcaster_id}get displayName(){return this[em.J_].broadcaster_name}async getChannel(){return ef(await this._client.channels.getChannelInfoById(this[em.J_].broadcaster_id))}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get gameId(){return this[em.J_].game_id}get gameName(){return this[em.J_].game_name}async getGame(){return this[em.J_].game_id?ef(await this._client.games.getGameById(this[em.J_].game_id)):null}get title(){return this[em.J_].title}};(0,p.gn)([(0,ep._)(!1)],tS.prototype,"_client",void 0),tS=(0,p.gn)([(0,z.P)("api","HelixChannelReference","id")],tS);let tC=class extends em.Lo{get sku(){return this[em.J_].sku}get cost(){return this[em.J_].cost.amount}get displayName(){return this[em.J_].display_name}get inDevelopment(){return this[em.J_].in_development}get isBroadcast(){return this[em.J_].is_broadcast}get expirationDate(){return(0,v.Ge)(this[em.J_].expiration,e=>new Date(e))}};tC=(0,p.gn)([(0,z.P)("api","HelixExtensionBitsProduct","sku")],tC);let tA=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get transactionDate(){return new Date(this[em.J_].timestamp)}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_name}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}get productType(){return this[em.J_].product_type}get productSku(){return this[em.J_].product_data.sku}get productCost(){return this[em.J_].product_data.cost.amount}get productDisplayName(){return this[em.J_].product_data.displayName}get productInDevelopment(){return this[em.J_].product_data.inDevelopment}};(0,p.gn)([(0,ep._)(!1)],tA.prototype,"_client",void 0),tA=(0,p.gn)([(0,z.P)("api","HelixExtensionTransaction","id")],tA);let tB=class extends eg{async getReleasedExtension(e,t){let r=await this._client.callApi({type:"helix",url:"extensions/released",query:{extension_id:e,extension_version:t}});return new tJ(r.data[0])}async getLiveChannelsWithExtension(e,t){return ek(await this._client.callApi({type:"helix",url:"extensions/live",query:{...eA("extension_id",e),...eN(t)}}),tS,this._client)}getLiveChannelsWithExtensionPaginated(e){return new eq({url:"extensions/live",query:eA("extension_id",e)},this._client,e=>new tS(e,this._client))}async getExtensionBitsProducts(e){return(await this._client.callApi({type:"helix",url:"bits/extensions",forceType:"app",query:eA("should_include_all",null==e?void 0:e.toString())})).data.map(e=>new tC(e))}async putExtensionBitsProduct(e){let t=await this._client.callApi({type:"helix",url:"bits/extensions",method:"PUT",forceType:"app",jsonBody:{sku:e.sku,cost:{amount:e.cost,type:"bits"},display_name:e.displayName,in_development:e.inDevelopment,expiration:e.expirationDate,is_broadcast:e.broadcast}});return new tC(t.data[0])}async getExtensionTransactions(e,t={}){return ek(await this._client.callApi({type:"helix",url:"extensions/transactions",forceType:"app",query:{...tI(e,t),...eN(t)}}),tA,this._client)}getExtensionTransactionsPaginated(e,t={}){return new eq({url:"extensions/transactions",forceType:"app",query:tI(e,t)},this._client,e=>new tA(e,this._client))}};tB=(0,p.gn)([(0,z.P)("api","HelixExtensionsApi")],tB);let tT=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get name(){return this[em.J_].name}get boxArtUrl(){return this[em.J_].box_art_url}get igdbId(){return this[em.J_].igdb_id||null}getBoxArtUrl(e,t){return this[em.J_].box_art_url.replace("{width}",e.toString()).replace("{height}",t.toString())}async getStreams(e){return await this._client.streams.getStreams({...e,game:this[em.J_].id})}getStreamsPaginated(){return this._client.streams.getStreamsPaginated({game:this[em.J_].id})}};(0,p.gn)([(0,ep._)(!1)],tT.prototype,"_client",void 0),tT=(0,p.gn)([(0,z.P)("api","HelixGame","id")],tT);let tP=class extends eg{constructor(){super(...arguments),this._getGameByIdBatcher=new eU({url:"games"},"id","id",this._client,e=>new tT(e,this._client)),this._getGameByNameBatcher=new eU({url:"games"},"name","name",this._client,e=>new tT(e,this._client)),this._getGameByIgdbIdBatcher=new eU({url:"games"},"igdb_id","igdb_id",this._client,e=>new tT(e,this._client))}async getGamesByIds(e){return await this._getGames("id",e)}async getGamesByNames(e){return await this._getGames("name",e)}async getGamesByIgdbIds(e){return await this._getGames("igdb_id",e)}async getGameById(e){var t;return null!==(t=(await this._getGames("id",[e]))[0])&&void 0!==t?t:null}async getGameByName(e){var t;return null!==(t=(await this._getGames("name",[e]))[0])&&void 0!==t?t:null}async getGameByIgdbId(e){var t;return null!==(t=(await this._getGames("igdb_id",[e]))[0])&&void 0!==t?t:null}async getGameByIdBatched(e){return await this._getGameByIdBatcher.request(e)}async getGameByNameBatched(e){return await this._getGameByNameBatcher.request(e)}async getGameByIgdbIdBatched(e){return await this._getGameByIgdbIdBatcher.request(e)}async getTopGames(e){return ek(await this._client.callApi({type:"helix",url:"games/top",query:eN(e)}),tT,this._client)}getTopGamesPaginated(){return new eq({url:"games/top"},this._client,e=>new tT(e,this._client))}async _getGames(e,t){return t.length?(await this._client.callApi({type:"helix",url:"games",query:{[e]:t}})).data.map(e=>new tT(e,this._client)):[]}};(0,p.gn)([(0,ep._)(!1)],tP.prototype,"_getGameByIdBatcher",void 0),(0,p.gn)([(0,ep._)(!1)],tP.prototype,"_getGameByNameBatcher",void 0),(0,p.gn)([(0,ep._)(!1)],tP.prototype,"_getGameByIgdbIdBatcher",void 0),tP=(0,p.gn)([(0,z.P)("api","HelixGameApi")],tP);let tE=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}get broadcasterName(){return this[em.J_].broadcaster_login}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get type(){return this[em.J_].type}get description(){return this[em.J_].description}get currentAmount(){return this[em.J_].current_amount}get targetAmount(){return this[em.J_].target_amount}get creationDate(){return this[em.J_].created_at}};(0,p.gn)([(0,ep._)(!1)],tE.prototype,"_client",void 0),tE=(0,p.gn)([(0,z.P)("api","HelixGoal","id")],tE);let tD=class extends eg{async getGoals(e){return(await this._client.callApi({type:"helix",url:"goals",userId:V(e),scopes:["channel:read:goals"],query:e_(e)})).data.map(e=>new tE(e,this._client))}};tD=(0,p.gn)([(0,z.P)("api","HelixGoalApi")],tD);let tU=class extends em.Lo{constructor(e,t){super(e),this._client=t}get userId(){return this[em.J_].user}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user))}get type(){return this[em.J_].type}get total(){return this[em.J_].total}};(0,p.gn)([(0,ep._)(!1)],tU.prototype,"_client",void 0),tU=(0,p.gn)([(0,z.P)("api","HelixHypeTrainContribution","userId")],tU);let tq=class extends em.Lo{constructor(e,t){super(e),this._client=t}get eventId(){return this[em.J_].id}get eventType(){return this[em.J_].event_type}get eventDate(){return new Date(this[em.J_].event_timestamp)}get eventVersion(){return this[em.J_].version}get id(){return this[em.J_].event_data.id}get broadcasterId(){return this[em.J_].event_data.broadcaster_id}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].event_data.broadcaster_id))}get level(){return this[em.J_].event_data.level}get startDate(){return new Date(this[em.J_].event_data.started_at)}get expiryDate(){return new Date(this[em.J_].event_data.expires_at)}get cooldownDate(){return new Date(this[em.J_].event_data.cooldown_end_time)}get total(){return this[em.J_].event_data.total}get goal(){return this[em.J_].event_data.goal}get lastContribution(){return new tU(this[em.J_].event_data.last_contribution,this._client)}get topContributions(){return this[em.J_].event_data.top_contributions.map(e=>new tU(e,this._client))}};(0,p.gn)([(0,ep._)(!1)],tq.prototype,"_client",void 0),tq=(0,p.gn)([(0,z.P)("api","HelixHypeTrainEvent","id")],tq);class tR extends eg{async getHypeTrainEventsForBroadcaster(e,t){return ek(await this._client.callApi({type:"helix",url:"hypetrain/events",userId:V(e),scopes:["channel:read:hype_train"],query:{...e_(e),...eN(t)}}),tq,this._client)}getHypeTrainEventsForBroadcasterPaginated(e){return new eq({url:"hypetrain/events",userId:V(e),scopes:["channel:read:hype_train"],query:e_(e)},this._client,e=>new tq(e,this._client))}}function tk(e,t){return{broadcaster_id:V(e),user_id:null==t?void 0:t.userId}}function tO(e,t){return{broadcaster_id:V(e),user_id:V(t)}}let tN=class extends em.Lo{get broadcasterId(){return this[em.J_].broadcaster_id}get moderatorId(){return this[em.J_].moderator_id}get overallLevel(){return this[em.J_].overall_level?this[em.J_].overall_level:null}get disability(){return this[em.J_].disability}get aggression(){return this[em.J_].aggression}get sexualitySexOrGender(){return this[em.J_].sexuality_sex_or_gender}get misogyny(){return this[em.J_].misogyny}get bullying(){return this[em.J_].bullying}get swearing(){return this[em.J_].swearing}get raceEthnicityOrReligion(){return this[em.J_].race_ethnicity_or_religion}get sexBasedTerms(){return this[em.J_].sex_based_terms}};tN=(0,p.gn)([(0,z.P)("api","HelixAutoModSettings","broadcasterId")],tN);let tL=class extends em.Lo{get messageId(){return this[em.J_].msg_id}get isPermitted(){return this[em.J_].is_permitted}};tL=(0,p.gn)([(0,z.P)("api","HelixAutoModStatus","messageId")],tL);let tj=class extends em.Lo{constructor(e,t,r){super(e),this._expiryTimestamp=t,this._client=r}get creationDate(){return new Date(this[em.J_].created_at)}get expiryDate(){return(0,v.Ge)(this._expiryTimestamp,e=>new Date(e))}get moderatorId(){return this[em.J_].moderator_id}async getModerator(){return ef(await this._client.users.getUserById(this[em.J_].moderator_id))}get userId(){return this[em.J_].user_id}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}};(0,p.gn)([(0,ep._)(!1)],tj.prototype,"_client",void 0),(0,p.gn)([(0,ep._)(!1)],tj.prototype,"_expiryTimestamp",void 0),tj=(0,p.gn)([(0,z.P)("api","HelixBanUser","userId")],tj);let tM=class extends tj{constructor(e,t){super(e,e.expires_at||null,t)}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}get moderatorName(){return this[em.J_].moderator_login}get moderatorDisplayName(){return this[em.J_].moderator_name}get reason(){return this[em.J_].reason||null}};tM=(0,p.gn)([(0,z.P)("api","HelixBan","userId")],tM);let tF=class extends em.Lo{get broadcasterId(){return this[em.J_].broadcaster_id}get creationDate(){return new Date(this[em.J_].created_at)}get expirationDate(){return this[em.J_].expires_at?new Date(this[em.J_].expires_at):null}get id(){return this[em.J_].id}get moderatorId(){return this[em.J_].moderator_id}get text(){return this[em.J_].text}get updatedDate(){return new Date(this[em.J_].updated_at)}};tF=(0,p.gn)([(0,z.P)("api","HelixBlockedTerm","id")],tF);let tH=class extends em.Lo{constructor(e,t){super(e),this._client=t}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}};(0,p.gn)([(0,ep._)(!1)],tH.prototype,"_client",void 0),tH=(0,p.gn)([(0,z.P)("api","HelixModerator","userId")],tH);let tG=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].broadcaster_id}get name(){return this[em.J_].broadcaster_login}get displayName(){return this[em.J_].broadcaster_name}async getChannel(){return ef(await this._client.channels.getChannelInfoById(this[em.J_].broadcaster_id))}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}};(0,p.gn)([(0,ep._)(!1)],tG.prototype,"_client",void 0),tG=(0,p.gn)([(0,z.P)("api","HelixModeratedChannel","id")],tG);let t$=class extends em.Lo{constructor(e,t){super(e),this._client=t}get isActive(){return this[em.J_].is_active}get moderatorId(){return this[em.J_].moderator_id}get moderatorName(){return this[em.J_].moderator_login}get moderatorDisplayName(){return this[em.J_].moderator_name}async getModerator(){return ef(await this._client.users.getUserById(this[em.J_].moderator_id))}get lastActivationDate(){return""===this[em.J_].last_activated_at?null:new Date(this[em.J_].last_activated_at)}};(0,p.gn)([(0,ep._)(!1)],t$.prototype,"_client",void 0),t$=(0,p.gn)([(0,z.P)("api","HelixShieldModeStatus")],t$);let tV=class extends eg{async getBannedUsers(e,t){return ek(await this._client.callApi({type:"helix",url:"moderation/banned",userId:V(e),scopes:["moderation:read"],query:{...tk(e,t),...eN(t)}}),tM,this._client)}getBannedUsersPaginated(e){return new eq({url:"moderation/banned",userId:V(e),scopes:["moderation:read"],query:e_(e)},this._client,e=>new tM(e,this._client),50)}async checkUserBan(e,t){let r=V(t);return(await this.getBannedUsers(e,{userId:r})).data.some(e=>e.userId===r)}async getModerators(e,t){return ek(await this._client.callApi({type:"helix",url:"moderation/moderators",userId:V(e),scopes:["moderation:read","channel:manage:moderators"],query:{...tk(e,t),...eN(t)}}),tH,this._client)}getModeratorsPaginated(e){return new eq({url:"moderation/moderators",userId:V(e),scopes:["moderation:read","channel:manage:moderators"],query:e_(e)},this._client,e=>new tH(e,this._client))}async getModeratedChannels(e,t){let r=V(e);return ek(await this._client.callApi({type:"helix",url:"moderation/channels",userId:r,scopes:["user:read:moderated_channels"],query:{...eA("user_id",r),...eN(t)}}),tG,this._client)}getModeratedChannelsPaginated(e){let t=V(e);return new eq({url:"moderation/channels",userId:t,scopes:["user:read:moderated_channels"],query:eA("user_id",t)},this._client,e=>new tG(e,this._client))}async checkUserMod(e,t){let r=V(t);return(await this.getModerators(e,{userId:r})).data.some(e=>e.userId===r)}async addModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"POST",userId:V(e),scopes:["channel:manage:moderators"],query:tO(e,t)})}async removeModerator(e,t){await this._client.callApi({type:"helix",url:"moderation/moderators",method:"DELETE",userId:V(e),scopes:["channel:manage:moderators"],query:tO(e,t)})}async checkAutoModStatus(e,t){return(await this._client.callApi({type:"helix",url:"moderation/enforcements/status",method:"POST",userId:V(e),scopes:["moderation:read"],query:e_(e),jsonBody:{data:t.map(e=>({msg_id:e.messageId,msg_text:e.messageText}))}})).data.map(e=>new tL(e))}async processHeldAutoModMessage(e,t,r){await this._client.callApi({type:"helix",url:"moderation/automod/message",method:"POST",userId:V(e),scopes:["moderator:manage:automod"],jsonBody:{user_id:V(e),msg_id:t,action:r?"ALLOW":"DENY"}})}async getAutoModSettings(e){let t=V(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",userId:t,scopes:["moderator:read:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)})).data.map(e=>new tN(e))}async updateAutoModSettings(e,t){let r=V(e);return(await this._client.callApi({type:"helix",url:"moderation/automod/settings",method:"PUT",userId:r,scopes:["moderator:manage:automod_settings"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:{overall_level:t.overallLevel,aggression:t.aggression,bullying:t.bullying,disability:t.disability,misogyny:t.misogyny,race_ethnicity_or_religion:t.raceEthnicityOrReligion,sex_based_terms:t.sexBasedTerms,sexuality_sex_or_gender:t.sexualitySexOrGender,swearing:t.swearing}})).data.map(e=>new tN(e))}async banUser(e,t){let r=V(e);return(await this._client.callApi({type:"helix",url:"moderation/bans",method:"POST",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:{data:{duration:t.duration,reason:t.reason,user_id:V(t.user)}}})).data.map(e=>new tj(e,e.end_time,this._client))}async unbanUser(e,t){let r=V(e);await this._client.callApi({type:"helix",url:"moderation/bans",method:"DELETE",userId:r,scopes:["moderator:manage:banned_users"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...eA("user_id",V(t))}})}async getBlockedTerms(e,t){let r=V(e);return ek(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",userId:r,scopes:["moderator:read:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...eN(t)}}),tF,this._client)}async addBlockedTerm(e,t){let r=V(e);return(await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"POST",userId:r,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:{text:t}})).data.map(e=>new tF(e))}async removeBlockedTerm(e,t,r){let n=V(e);await this._client.callApi({type:"helix",url:"moderation/blocked_terms",method:"DELETE",userId:n,scopes:["moderator:manage:blocked_terms"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(n),id:r}})}async deleteChatMessages(e,t){let r=V(e);await this._client.callApi({type:"helix",url:"moderation/chat",method:"DELETE",userId:r,scopes:["moderator:manage:chat_messages"],canOverrideScopedUserContext:!0,query:{...this._createModeratorActionQuery(r),...eA("message_id",t)}})}async getShieldModeStatus(e){let t=V(e),r=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"GET",userId:t,scopes:["moderator:read:shield_mode","moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(t)});return new t$(r.data[0],this._client)}async updateShieldModeStatus(e,t){let r=V(e),n=await this._client.callApi({type:"helix",url:"moderation/shield_mode",method:"PUT",userId:r,scopes:["moderator:manage:shield_mode"],canOverrideScopedUserContext:!0,query:this._createModeratorActionQuery(r),jsonBody:{is_active:t}});return new t$(n.data[0],this._client)}_createModeratorActionQuery(e){return eT(e,this._getUserContextIdWithDefault(e))}};tV=(0,p.gn)([(0,z.P)("api","HelixModerationApi")],tV);let tW=class extends em.Lo{get id(){return this[em.J_].id}get title(){return this[em.J_].title}get totalVotes(){return this[em.J_].votes}get channelPointsVotes(){return this[em.J_].channel_points_votes}};tW=(0,p.gn)([(0,z.P)("api","HelixPollChoice","id")],tW);let tz=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get title(){return this[em.J_].title}get isChannelPointsVotingEnabled(){return this[em.J_].channel_points_voting_enabled}get channelPointsPerVote(){return this[em.J_].channel_points_per_vote}get status(){return this[em.J_].status}get durationInSeconds(){return this[em.J_].duration}get startDate(){return new Date(this[em.J_].started_at)}get endDate(){return new Date(this.startDate.getTime()+1e3*this[em.J_].duration)}get choices(){return this[em.J_].choices.map(e=>new tW(e))}};(0,p.gn)([(0,ep._)(!1)],tz.prototype,"_client",void 0),tz=(0,p.gn)([(0,z.P)("api","HelixPoll","id")],tz);let tQ=class extends eg{async getPolls(e,t){return ek(await this._client.callApi({type:"helix",url:"polls",userId:V(e),scopes:["channel:read:polls"],query:{...e_(e),...eN(t)}}),tz,this._client)}getPollsPaginated(e){return new eq({url:"polls",userId:V(e),scopes:["channel:read:polls"],query:e_(e)},this._client,e=>new tz(e,this._client),20)}async getPollsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"polls",userId:V(e),scopes:["channel:read:polls"],query:eP(e,t)})).data.map(e=>new tz(e,this._client)):[]}async getPollById(e,t){let r=await this.getPollsByIds(e,[t]);return r.length?r[0]:null}async createPoll(e,t){var r;let n=await this._client.callApi({type:"helix",url:"polls",method:"POST",userId:V(e),scopes:["channel:manage:polls"],jsonBody:{broadcaster_id:V(e),title:t.title,choices:t.choices.map(e=>({title:e})),duration:t.duration,channel_points_voting_enabled:null!=t.channelPointsPerVote,channel_points_per_vote:null!==(r=t.channelPointsPerVote)&&void 0!==r?r:0}});return new tz(n.data[0],this._client)}async endPoll(e,t,r=!0){let n=await this._client.callApi({type:"helix",url:"polls",method:"PATCH",userId:V(e),scopes:["channel:manage:polls"],jsonBody:{broadcaster_id:V(e),id:t,status:r?"TERMINATED":"ARCHIVED"}});return new tz(n.data[0],this._client)}};tQ=(0,p.gn)([(0,z.P)("api","HelixPollApi")],tQ);let tK=class extends em.Lo{constructor(e,t){super(e),this._client=t}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return await this._client.users.getUserById(this[em.J_].user_id)}get channelPointsUsed(){return this[em.J_].channel_points_used}get channelPointsWon(){return this[em.J_].channel_points_won}};(0,p.gn)([(0,ep._)(!1)],tK.prototype,"_client",void 0),tK=(0,p.gn)([(0,z.P)("api","HelixPredictor","userId")],tK);let tZ=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get title(){return this[em.J_].title}get users(){return this[em.J_].users}get totalChannelPoints(){return this[em.J_].channel_points}get color(){return this[em.J_].color}get topPredictors(){var e,t;return null!==(t=null===(e=this[em.J_].top_predictors)||void 0===e?void 0:e.map(e=>new tK(e,this._client)))&&void 0!==t?t:[]}};(0,p.gn)([(0,ep._)(!1)],tZ.prototype,"_client",void 0),tZ=(0,p.gn)([(0,z.P)("api","HelixPredictionOutcome","id")],tZ);let tY=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get title(){return this[em.J_].title}get status(){return this[em.J_].status}get autoLockAfter(){return this[em.J_].prediction_window}get creationDate(){return new Date(this[em.J_].created_at)}get endDate(){return this[em.J_].ended_at?new Date(this[em.J_].ended_at):null}get lockDate(){return this[em.J_].locked_at?new Date(this[em.J_].locked_at):null}get outcomes(){return this[em.J_].outcomes.map(e=>new tZ(e,this._client))}get winningOutcomeId(){return this[em.J_].winning_outcome_id||null}get winningOutcome(){if(!this[em.J_].winning_outcome_id)return null;let e=this[em.J_].outcomes.find(e=>e.id===this[em.J_].winning_outcome_id);if(!e)throw new ed("Winning outcome not found in outcomes array");return new tZ(e,this._client)}};(0,p.gn)([(0,ep._)(!1)],tY.prototype,"_client",void 0),tY=(0,p.gn)([(0,z.P)("api","HelixPrediction","id")],tY);let tX=class extends eg{async getPredictions(e,t){return ek(await this._client.callApi({type:"helix",url:"predictions",userId:V(e),scopes:["channel:read:predictions"],query:{...e_(e),...eN(t)}}),tY,this._client)}getPredictionsPaginated(e){return new eq({url:"predictions",userId:V(e),scopes:["channel:read:predictions"],query:e_(e)},this._client,e=>new tY(e,this._client),20)}async getPredictionsByIds(e,t){return t.length?(await this._client.callApi({type:"helix",url:"predictions",userId:V(e),scopes:["channel:read:predictions"],query:eP(e,t)})).data.map(e=>new tY(e,this._client)):[]}async getPredictionById(e,t){let r=await this.getPredictionsByIds(e,[t]);return r.length?r[0]:null}async createPrediction(e,t){let r=await this._client.callApi({type:"helix",url:"predictions",method:"POST",userId:V(e),scopes:["channel:manage:predictions"],jsonBody:{broadcaster_id:V(e),title:t.title,outcomes:t.outcomes.map(e=>({title:e})),prediction_window:t.autoLockAfter}});return new tY(r.data[0],this._client)}async lockPrediction(e,t){return await this._endPrediction(e,t,"LOCKED")}async resolvePrediction(e,t,r){return await this._endPrediction(e,t,"RESOLVED",r)}async cancelPrediction(e,t){return await this._endPrediction(e,t,"CANCELED")}async _endPrediction(e,t,r,n){let i=await this._client.callApi({type:"helix",url:"predictions",method:"PATCH",userId:V(e),scopes:["channel:manage:predictions"],jsonBody:{broadcaster_id:V(e),id:t,status:r,winning_outcome_id:n}});return new tY(i.data[0],this._client)}};tX=(0,p.gn)([(0,z.P)("api","HelixPredictionApi")],tX);let t0=class extends em.Lo{get creationDate(){return new Date(this[em.J_].created_at)}get targetIsMature(){return this[em.J_].is_mature}};t0=(0,p.gn)([(0,z.P)("api","HelixRaid")],t0);let t1=class extends eg{async startRaid(e,t){let r=await this._client.callApi({type:"helix",url:"raids",method:"POST",userId:V(e),scopes:["channel:manage:raids"],query:{from_broadcaster_id:V(e),to_broadcaster_id:V(t)}});return new t0(r.data[0])}async cancelRaid(e){await this._client.callApi({type:"helix",url:"raids",method:"DELETE",userId:V(e),scopes:["channel:manage:raids"],query:e_(e)})}};function t2(e,t){var r;return{broadcaster_id:V(e),start_time:null==t?void 0:t.startDate,utc_offset:null===(r=null==t?void 0:t.utcOffset)||void 0===r?void 0:r.toString()}}function t3(e,t){return{broadcaster_id:V(e),id:t}}t1=(0,p.gn)([(0,z.P)("api","HelixRaidApi")],t1);let t8=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get startDate(){return new Date(this[em.J_].start_time)}get endDate(){return new Date(this[em.J_].end_time)}get title(){return this[em.J_].title}get cancelEndDate(){return(0,v.Ge)(this[em.J_].canceled_until,e=>new Date(e))}get categoryId(){var e,t;return null!==(t=null===(e=this[em.J_].category)||void 0===e?void 0:e.id)&&void 0!==t?t:null}get categoryName(){var e,t;return null!==(t=null===(e=this[em.J_].category)||void 0===e?void 0:e.name)&&void 0!==t?t:null}async getCategory(){var e;let t=null===(e=this[em.J_].category)||void 0===e?void 0:e.id;return t?await this._client.games.getGameById(t):null}get isRecurring(){return this[em.J_].is_recurring}};(0,p.gn)([(0,ep._)(!1)],t8.prototype,"_client",void 0),t8=(0,p.gn)([(0,z.P)("api","HelixScheduleSegment","id")],t8);let t4=class extends eq{constructor(e,t,r){super({url:"schedule",query:t2(e,r)},t,e=>new t8(e,t),25)}async _fetchData(e={}){var t;let r=await super._fetchData(e);return{data:null!==(t=r.data.segments)&&void 0!==t?t:[],pagination:r.pagination}}};t4=(0,p.gn)([(0,z.P)("api","HelixPaginatedScheduleSegmentRequest")],t4);let t6=class extends em.Lo{constructor(e,t){super(e),this._client=t}get segments(){var e,t;return null!==(t=null===(e=this[em.J_].segments)||void 0===e?void 0:e.map(e=>new t8(e,this._client)))&&void 0!==t?t:[]}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get vacationStartDate(){var e;let t=null===(e=this[em.J_].vacation)||void 0===e?void 0:e.start_time;return t?new Date(t):null}get vacationEndDate(){var e;let t=null===(e=this[em.J_].vacation)||void 0===e?void 0:e.end_time;return t?new Date(t):null}};(0,p.gn)([(0,ep._)(!1)],t6.prototype,"_client",void 0),t6=(0,p.gn)([(0,z.P)("api","HelixSchedule","broadcasterId")],t6);class t7 extends eg{async getSchedule(e,t){let r=await this._client.callApi({type:"helix",url:"schedule",userId:V(e),query:{...t2(e,t),...eN(t)}});return{data:new t6(r.data,this._client),cursor:r.pagination.cursor}}getScheduleSegmentsPaginated(e,t){return new t4(e,this._client,t)}async getScheduleSegmentsByIds(e,t){var r,n;return null!==(n=null===(r=(await this._client.callApi({type:"helix",url:"schedule",userId:V(e),query:eP(e,t)})).data.segments)||void 0===r?void 0:r.map(e=>new t8(e,this._client)))&&void 0!==n?n:[]}async getScheduleSegmentById(e,t){let r=await this.getScheduleSegmentsByIds(e,[t]);return r.length?r[0]:null}async getScheduleAsIcal(e){return await this._client.callApi({type:"helix",url:"schedule/icalendar",query:e_(e)})}async updateScheduleSettings(e,t){await this._client.callApi({type:"helix",url:"schedule/settings",method:"PATCH",userId:V(e),scopes:["channel:manage:schedule"],query:t.vacation?{broadcaster_id:V(e),is_vacation_enabled:"true",vacation_start_time:t.vacation.startDate,vacation_end_time:t.vacation.endDate,timezone:t.vacation.timezone}:{broadcaster_id:V(e),is_vacation_enabled:"false"}})}async createScheduleSegment(e,t){let r=await this._client.callApi({type:"helix",url:"schedule/segment",method:"POST",userId:V(e),scopes:["channel:manage:schedule"],query:e_(e),jsonBody:{start_time:t.startDate,timezone:t.timezone,is_recurring:t.isRecurring,duration:t.duration,category_id:t.categoryId,title:t.title}});return new t8(r.data.segments[0],this._client)}async updateScheduleSegment(e,t,r){let n=await this._client.callApi({type:"helix",url:"schedule/segment",method:"PATCH",userId:V(e),scopes:["channel:manage:schedule"],query:t3(e,t),jsonBody:{start_time:r.startDate,timezone:r.timezone,is_canceled:r.isCanceled,duration:r.duration,category_id:r.categoryId,title:r.title}});return new t8(n.data.segments[0],this._client)}async deleteScheduleSegment(e,t){await this._client.callApi({type:"helix",url:"schedule/segment",method:"DELETE",userId:V(e),scopes:["channel:manage:schedule"],query:t3(e,t)})}}function t9(e,t){var r;return{query:e,live_only:null===(r=t.liveOnly)||void 0===r?void 0:r.toString()}}let t5=class extends em.Lo{constructor(e,t){super(e),this._client=t}get language(){return this[em.J_].broadcaster_language}get id(){return this[em.J_].id}get name(){return this[em.J_].broadcaster_login}get displayName(){return this[em.J_].display_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].id))}get gameId(){return this[em.J_].game_id}get gameName(){return this[em.J_].game_name}async getGame(){return this[em.J_].game_id?ef(await this._client.games.getGameById(this[em.J_].game_id)):null}get isLive(){return this[em.J_].is_live}get tags(){return this[em.J_].tags}get thumbnailUrl(){return this[em.J_].thumbnail_url}get startDate(){return this[em.J_].is_live?new Date(this[em.J_].started_at):null}};(0,p.gn)([(0,ep._)(!1)],t5.prototype,"_client",void 0),t5=(0,p.gn)([(0,z.P)("api","HelixChannelSearchResult","id")],t5);let re=class extends eg{async searchCategories(e,t){return ek(await this._client.callApi({type:"helix",url:"search/categories",query:{query:e,...eN(t)}}),tT,this._client)}searchCategoriesPaginated(e){return new eq({url:"search/categories",query:{query:e}},this._client,e=>new tT(e,this._client))}async searchChannels(e,t={}){return ek(await this._client.callApi({type:"helix",url:"search/channels",query:{...t9(e,t),...eN(t)}}),t5,this._client)}searchChannelsPaginated(e,t={}){return new eq({url:"search/channels",query:t9(e,t)},this._client,e=>new t5(e,this._client))}};function rt(e){var t;return(t=[]).concat.apply(t,(0,p.ev)([],(0,p.CR)(e),!1))}re=(0,p.gn)([(0,z.P)("api","HelixSearchApi")],re);class rr extends Q.s{constructor(e){super("Your stream needs to be live to do this",e)}}function rn(e){return{game_id:e.game,language:e.language,type:e.type,user_id:e.userId,user_login:e.userName}}function ri(e){return{video_id:e}}let rs=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}get gameId(){return this[em.J_].game_id}get gameName(){return this[em.J_].game_name}async getGame(){return this[em.J_].game_id?ef(await this._client.games.getGameById(this[em.J_].game_id)):null}get type(){return this[em.J_].type}get title(){return this[em.J_].title}get viewers(){return this[em.J_].viewer_count}get startDate(){return new Date(this[em.J_].started_at)}get language(){return this[em.J_].language}get thumbnailUrl(){return this[em.J_].thumbnail_url}getThumbnailUrl(e,t){return this[em.J_].thumbnail_url.replace("{width}",e.toString()).replace("{height}",t.toString())}get tags(){return this[em.J_].tags}get isMature(){return this[em.J_].is_mature}};(0,p.gn)([(0,ep._)(!1)],rs.prototype,"_client",void 0),rs=(0,p.gn)([(0,z.P)("api","HelixStream","id")],rs);let ra=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get creationDate(){return new Date(this[em.J_].created_at)}get description(){return this[em.J_].description}get positionInSeconds(){return this[em.J_].position_seconds}};(0,p.gn)([(0,ep._)(!1)],ra.prototype,"_client",void 0),ra=(0,p.gn)([(0,z.P)("api","HelixStreamMarker","id")],ra);let ro=class extends ra{constructor(e,t,r){super(e,r),this._videoId=t}get url(){return this[em.J_].URL}get videoId(){return this._videoId}async getVideo(){return ef(await this._client.videos.getVideoById(this._videoId))}};ro=(0,p.gn)([(0,z.P)("api","HelixStreamMarkerWithVideo","id")],ro);let ru=h=class extends eg{constructor(){super(...arguments),this._getStreamByUserIdBatcher=new eU({url:"streams"},"user_id","user_id",this._client,e=>new rs(e,this._client)),this._getStreamByUserNameBatcher=new eU({url:"streams"},"user_login","user_login",this._client,e=>new rs(e,this._client))}async getStreams(e={}){return ek(await this._client.callApi({url:"streams",type:"helix",query:{...rn(e),...eN(e)}}),rs,this._client)}getStreamsPaginated(e={}){return new eq({url:"streams",query:rn(e)},this._client,e=>new rs(e,this._client))}async getStreamsByUserNames(e){return(await this.getStreams({userName:e.map(W)})).data}async getStreamByUserName(e){var t;return null!==(t=(await this.getStreamsByUserNames([e]))[0])&&void 0!==t?t:null}async getStreamByUserNameBatched(e){return await this._getStreamByUserNameBatcher.request(W(e))}async getStreamsByUserIds(e){return(await this.getStreams({userId:e.map(V)})).data}async getStreamByUserId(e){let t=V(e),r=await this._client.callApi({url:"streams",type:"helix",userId:t,query:rn({userId:t})});return(0,v.Ge)(r.data[0],e=>new rs(e,this._client))}async getStreamByUserIdBatched(e){return await this._getStreamByUserIdBatcher.request(V(e))}async getStreamMarkersForUser(e,t){var r;let n=await this._client.callApi({url:"streams/markers",type:"helix",query:{...eB(e),...eN(t)},userId:V(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:rt(n.data.map(e=>h._mapGetStreamMarkersResult(e,this._client))),cursor:null===(r=n.pagination)||void 0===r?void 0:r.cursor}}getStreamMarkersForUserPaginated(e){return new eq({url:"streams/markers",query:eB(e),userId:V(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,e=>h._mapGetStreamMarkersResult(e,this._client))}async getStreamMarkersForVideo(e,t,r){var n;let i=await this._client.callApi({url:"streams/markers",type:"helix",query:{...ri(t),...eN(r)},userId:V(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0});return{data:rt(i.data.map(e=>h._mapGetStreamMarkersResult(e,this._client))),cursor:null===(n=i.pagination)||void 0===n?void 0:n.cursor}}getStreamMarkersForVideoPaginated(e,t){return new eq({url:"streams/markers",query:ri(t),userId:V(e),scopes:["user:read:broadcast"],canOverrideScopedUserContext:!0},this._client,e=>h._mapGetStreamMarkersResult(e,this._client))}async createStreamMarker(e,t){try{let r=await this._client.callApi({url:"streams/markers",method:"POST",type:"helix",userId:V(e),scopes:["channel:manage:broadcast"],canOverrideScopedUserContext:!0,jsonBody:{user_id:V(e),description:t}});return new ra(r.data[0],this._client)}catch(e){if(e instanceof ea.o&&404===e.statusCode)throw new rr({cause:e});throw e}}async getStreamKey(e){let t=V(e);return(await this._client.callApi({type:"helix",url:"streams/key",userId:t,scopes:["channel:read:stream_key"],query:e_(e)})).data[0].stream_key}async getFollowedStreams(e,t){let r=V(e);return ek(await this._client.callApi({type:"helix",url:"streams/followed",userId:r,scopes:["user:read:follows"],query:{...eA("user_id",r),...eN(t)}}),rs,this._client)}getFollowedStreamsPaginated(e){let t=V(e);return new eq({url:"streams/followed",userId:t,scopes:["user:read:follows"],query:eA("user_id",t)},this._client,e=>new rs(e,this._client))}static _mapGetStreamMarkersResult(e,t){return e.videos.reduce((e,r)=>[...e,...r.markers.map(e=>new ro(e,r.video_id,t))],[])}};(0,p.gn)([(0,ep._)(!1)],ru.prototype,"_getStreamByUserIdBatcher",void 0),(0,p.gn)([(0,ep._)(!1)],ru.prototype,"_getStreamByUserNameBatcher",void 0),ru=h=(0,p.gn)([(0,z.P)("api","HelixStreamApi")],ru);let rl=class extends em.Lo{constructor(e,t){super(e),this._client=t}get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return await this._client.users.getUserById(this[em.J_].broadcaster_id)}get isGift(){return this[em.J_].is_gift}get tier(){return this[em.J_].tier}};(0,p.gn)([(0,ep._)(!1)],rl.prototype,"_client",void 0),rl=(0,p.gn)([(0,z.P)("api","HelixUserSubscription","broadcasterId")],rl);let rc=class extends rl{get broadcasterId(){return this[em.J_].broadcaster_id}get broadcasterName(){return this[em.J_].broadcaster_login}get broadcasterDisplayName(){return this[em.J_].broadcaster_name}async getBroadcaster(){return ef(await this._client.users.getUserById(this[em.J_].broadcaster_id))}get gifterId(){return this[em.J_].is_gift?this[em.J_].gifter_id:null}get gifterName(){return this[em.J_].is_gift?this[em.J_].gifter_login:null}get gifterDisplayName(){return this[em.J_].is_gift?this[em.J_].gifter_name:null}async getGifter(){return this[em.J_].is_gift?ef(await this._client.users.getUserById(this[em.J_].gifter_id)):null}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}};rc=(0,p.gn)([(0,z.P)("api","HelixSubscription","userId")],rc);let rd=class extends eR{constructor(e,t){super({url:"subscriptions",scopes:["channel:read:subscriptions"],userId:V(e),query:e_(e)},t,e=>new rc(e,t))}async getPoints(){var e;return(null!==(e=this._currentData)&&void 0!==e?e:await this._fetchData({query:{after:void 0}})).points}};rd=(0,p.gn)([(0,z.P)("api","HelixPaginatedSubscriptionsRequest")],rd);let rh=class extends eg{async getSubscriptions(e,t){let r=await this._client.callApi({url:"subscriptions",scopes:["channel:read:subscriptions"],type:"helix",userId:V(e),query:{...e_(e),...eN(t)}});return{...eO(r,rc,this._client),points:r.points}}getSubscriptionsPaginated(e){return new rd(e,this._client)}async getSubscriptionsForUsers(e,t){return(await this._client.callApi({type:"helix",url:"subscriptions",userId:V(e),scopes:["channel:read:subscriptions"],query:eE(e,t)})).data.map(e=>new rc(e,this._client))}async getSubscriptionForUser(e,t){let r=await this.getSubscriptionsForUsers(e,[t]);return r.length?r[0]:null}async checkUserSubscription(e,t){try{let r=await this._client.callApi({type:"helix",url:"subscriptions/user",userId:V(e),scopes:["user:read:subscriptions"],query:{broadcaster_id:V(t),user_id:V(e)}});return new rl(r.data[0],this._client)}catch(e){if(e instanceof ea.o&&404===e.statusCode)return null;throw e}}};rh=(0,p.gn)([(0,z.P)("api","HelixSubscriptionApi")],rh);let r_=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get name(){return this[em.J_].team_name}get displayName(){return this[em.J_].team_display_name}get backgroundImageUrl(){return this[em.J_].background_image_url}get bannerUrl(){return this[em.J_].banner}get creationDate(){return new Date(this[em.J_].created_at)}get updateDate(){return new Date(this[em.J_].updated_at)}get info(){return this[em.J_].info}get logoThumbnailUrl(){return this[em.J_].thumbnail_url}async getUserRelations(){return(await this._client.teams.getTeamById(this.id)).userRelations}};(0,p.gn)([(0,ep._)(!1)],r_.prototype,"_client",void 0),r_=(0,p.gn)([(0,z.P)("api","HelixTeam","id")],r_);let rp=class extends r_{get userRelations(){return this[em.J_].users.map(e=>new eD(e,this._client))}};rp=(0,p.gn)([(0,z.P)("api","HelixTeamWithUsers","id")],rp);let rg=class extends eg{async getTeamsForBroadcaster(e){var t,r;return null!==(r=null===(t=(await this._client.callApi({type:"helix",url:"teams/channel",userId:V(e),query:e_(e)})).data)||void 0===t?void 0:t.map(e=>new r_(e,this._client)))&&void 0!==r?r:[]}async getTeamById(e){try{let t=await this._client.callApi({type:"helix",url:"teams",query:{id:e}});return new rp(t.data[0],this._client)}catch(e){if(e instanceof ea.o&&500===e.statusCode)return null;throw e}}async getTeamByName(e){try{let t=await this._client.callApi({type:"helix",url:"teams",query:{name:e}});return new rp(t.data[0],this._client)}catch(e){if(e instanceof ea.o&&404===e.statusCode)return null;throw e}}};rg=(0,p.gn)([(0,z.P)("api","HelixTeamApi")],rg);class rm extends em.Lo{get id(){return this[em.J_].id}get version(){return this[em.J_].version}get name(){return this[em.J_].name}}let ry=class extends rm{constructor(e,t,r){super(r),this._slotType=e,this._slotId=t}get slotType(){return this._slotType}get slotId(){return this._slotId}};ry=(0,p.gn)([(0,z.P)("api","HelixInstalledExtension","id")],ry);let rf=class extends em.Lo{getExtensionAtSlot(e,t){let r=this[em.J_][e][t];return r.active?new ry(e,t,r):null}getExtensionsForSlotType(e){return[...Object.entries(this[em.J_][e])].filter(e=>e[1].active).map(([t,r])=>new ry(e,t,r))}getAllExtensions(){return[...Object.entries(this[em.J_])].flatMap(([e,t])=>[...Object.entries(t)].filter(e=>e[1].active).map(([t,r])=>new ry(e,t,r)))}};rf=(0,p.gn)([(0,z.P)("api","HelixInstalledExtensionList")],rf);let rv=class extends rm{get canActivate(){return this[em.J_].can_activate}get types(){return this[em.J_].type}};rv=(0,p.gn)([(0,z.P)("api","HelixUserExtension","id")],rv);let rw=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get name(){return this[em.J_].login}get displayName(){return this[em.J_].display_name}get description(){return this[em.J_].description}get type(){return this[em.J_].type}get broadcasterType(){return this[em.J_].broadcaster_type}get profilePictureUrl(){return this[em.J_].profile_image_url}get offlinePlaceholderUrl(){return this[em.J_].offline_image_url}get creationDate(){return new Date(this[em.J_].created_at)}async getStream(){return await this._client.streams.getStreamByUserId(this)}async getFollowedChannels(){return await this._client.channels.getFollowedChannels(this)}async getFollowedChannel(e){var t;return null!==(t=(await this._client.channels.getFollowedChannels(this,e)).data[0])&&void 0!==t?t:null}async follows(e){return await this.getFollowedChannel(e)!==null}async getChannelFollowers(){return await this._client.channels.getChannelFollowers(this)}async getChannelFollower(e){var t;return null!==(t=(await this._client.channels.getChannelFollowers(this,e)).data[0])&&void 0!==t?t:null}async isFollowedBy(e){return await this.getChannelFollower(e)!==null}async getSubscriptionTo(e){return await this._client.subscriptions.checkUserSubscription(this,e)}async isSubscribedTo(e){return await this.getSubscriptionTo(e)!==null}async getSubscriber(e){return await this._client.subscriptions.getSubscriptionForUser(this,e)}async hasSubscriber(e){return await this.getSubscriber(e)!==null}};(0,p.gn)([(0,ep._)(!1)],rw.prototype,"_client",void 0),rw=(0,p.gn)([(0,z.P)("api","HelixUser","id")],rw);let rb=class extends rw{get email(){return this[em.J_].email}async setDescription(e){return await this._client.users.updateAuthenticatedUser(this,{description:e})}};rb=(0,p.gn)([(0,z.P)("api","HelixPrivilegedUser","id")],rb);let rx=class extends em.Lo{constructor(e,t){super(e),this._client=t}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].display_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}};(0,p.gn)([(0,ep._)(!1)],rx.prototype,"_client",void 0),rx=(0,p.gn)([(0,z.P)("api","HelixUserBlock","userId")],rx);let rJ=class extends eg{constructor(){super(...arguments),this._getUserByIdBatcher=new eU({url:"users"},"id","id",this._client,e=>new rw(e,this._client)),this._getUserByNameBatcher=new eU({url:"users"},"login","login",this._client,e=>new rw(e,this._client))}async getUsersByIds(e){return await this._getUsers("id",e.map(V))}async getUsersByNames(e){return await this._getUsers("login",e.map(W))}async getUserById(e){let t=V(e),r=await this._client.callApi({type:"helix",url:"users",userId:t,query:{id:t}});return(0,v.Ge)(r.data[0],e=>new rw(e,this._client))}async getUserByIdBatched(e){return await this._getUserByIdBatcher.request(V(e))}async getUserByName(e){let t=await this._getUsers("login",[W(e)]);return t.length?t[0]:null}async getUserByNameBatched(e){return await this._getUserByNameBatcher.request(W(e))}async getAuthenticatedUser(e,t=!1){var r;let n=await this._client.callApi({type:"helix",url:"users",forceType:"user",userId:V(e),scopes:t?["user:read:email"]:void 0});if(!(null===(r=n.data)||void 0===r?void 0:r.length))throw new ed("Could not get authenticated user");return new rb(n.data[0],this._client)}async updateAuthenticatedUser(e,t){let r=await this._client.callApi({type:"helix",url:"users",method:"PUT",userId:V(e),scopes:["user:edit"],query:{description:t.description}});return new rb(r.data[0],this._client)}async getBlocks(e,t){return ek(await this._client.callApi({type:"helix",url:"users/blocks",userId:V(e),scopes:["user:read:blocked_users"],query:{...e_(e),...eN(t)}}),rx,this._client)}getBlocksPaginated(e){return new eq({url:"users/blocks",userId:V(e),scopes:["user:read:blocked_users"],query:e_(e)},this._client,e=>new rx(e,this._client))}async createBlock(e,t,r={}){await this._client.callApi({type:"helix",url:"users/blocks",method:"PUT",userId:V(e),scopes:["user:manage:blocked_users"],query:{target_user_id:V(t),source_context:r.sourceContext,reason:r.reason}})}async deleteBlock(e,t){await this._client.callApi({type:"helix",url:"users/blocks",method:"DELETE",userId:V(e),scopes:["user:manage:blocked_users"],query:{target_user_id:V(t)}})}async getExtensionsForAuthenticatedUser(e,t=!1){return(await this._client.callApi({type:"helix",url:"users/extensions/list",userId:V(e),scopes:t?["channel:manage:extensions"]:["user:read:broadcast","channel:manage:extensions"]})).data.map(e=>new rv(e))}async getActiveExtensions(e,t=!1){let r=V(e),n=await this._client.callApi({type:"helix",url:"users/extensions",userId:r,scopes:t?["user:read:broadcast","channel:manage:extensions"]:void 0,query:eA("user_id",r)});return new rf(n.data)}async updateActiveExtensionsForAuthenticatedUser(e,t){let r=await this._client.callApi({type:"helix",url:"users/extensions",method:"PUT",userId:V(e),scopes:["channel:manage:extensions"],jsonBody:{data:t}});return new rf(r.data)}async _getUsers(e,t){return 0===t.length?[]:(await this._client.callApi({type:"helix",url:"users",query:{[e]:t}})).data.map(e=>new rw(e,this._client))}};(0,p.gn)([(0,ep._)(!1)],rJ.prototype,"_getUserByIdBatcher",void 0),(0,p.gn)([(0,ep._)(!1)],rJ.prototype,"_getUserByNameBatcher",void 0),rJ=(0,p.gn)([(0,z.P)("api","HelixUserApi")],rJ);let rI=class extends em.Lo{constructor(e,t){super(e),this._client=t}get id(){return this[em.J_].id}get userId(){return this[em.J_].user_id}get userName(){return this[em.J_].user_login}get userDisplayName(){return this[em.J_].user_name}async getUser(){return ef(await this._client.users.getUserById(this[em.J_].user_id))}get title(){return this[em.J_].title}get description(){return this[em.J_].description}get creationDate(){return new Date(this[em.J_].created_at)}get publishDate(){return new Date(this[em.J_].published_at)}get url(){return this[em.J_].url}get thumbnailUrl(){return this[em.J_].thumbnail_url}getThumbnailUrl(e,t){return this[em.J_].thumbnail_url.replace("%{width}",e.toString()).replace("%{height}",t.toString())}get isPublic(){return"public"===this[em.J_].viewable}get views(){return this[em.J_].view_count}get language(){return this[em.J_].language}get type(){return this[em.J_].type}get duration(){return this[em.J_].duration}get durationInSeconds(){let e=this[em.J_].duration.match(/\d+[hms]/g);if(!e)throw new ed(`Could not parse duration string: ${this[em.J_].duration}`);return e.map(e=>{let t=/(\d+)([hms])/.exec(e);if(!t)throw new ed(`Could not parse partial duration string: ${e}`);let[,r,n]=t;return parseInt(r,10)*({h:3600,m:60,s:1})[n]}).reduce((e,t)=>e+t)}get streamId(){return this[em.J_].stream_id}get mutedSegmentData(){var e,t;return null!==(t=null===(e=this[em.J_].muted_segments)||void 0===e?void 0:e.slice())&&void 0!==t?t:[]}isMutedAt(e,t,r=!1){if(null===this[em.J_].muted_segments)return!1;if(null==t)return this[em.J_].muted_segments.some(t=>t.offset<=e&&e<=t.offset+t.duration);let n=e+t;return r?this[em.J_].muted_segments.some(t=>e<t.offset+t.duration&&t.offset<n):this[em.J_].muted_segments.some(t=>{let r=t.offset+t.duration;return t.offset<=e&&n<=r})}};(0,p.gn)([(0,ep._)(!1)],rI.prototype,"_client",void 0),(0,p.gn)([ee()],rI.prototype,"durationInSeconds",null),rI=(0,p.gn)([er,(0,z.P)("api","HelixVideo","id")],rI);let rS=_=class extends eg{constructor(){super(...arguments),this._getVideoByIdBatcher=new eU({url:"videos"},"id","id",this._client,e=>new rI(e,this._client))}async getVideosByIds(e){return(await this._getVideos("id",e)).data}async getVideoById(e){let t=await this.getVideosByIds([e]);return t.length?t[0]:null}async getVideoByIdBatched(e){return await this._getVideoByIdBatcher.request(e)}async getVideosByUser(e,t={}){let r=V(e);return await this._getVideos("user_id",[r],t)}getVideosByUserPaginated(e,t={}){let r=V(e);return this._getVideosPaginated("user_id",[r],t)}async getVideosByGame(e,t={}){return await this._getVideos("game_id",[e],t)}getVideosByGamePaginated(e,t={}){return this._getVideosPaginated("game_id",[e],t)}async deleteVideosByIds(e,t){await this._client.callApi({type:"helix",url:"videos",method:"DELETE",scopes:["channel:manage:videos"],userId:V(e),query:{id:t}})}async _getVideos(e,t,r={}){return t.length?ek(await this._client.callApi({type:"helix",url:"videos",userId:"user_id"===e?t[0]:void 0,query:{..._._makeVideosQuery(e,t,r),...eN(r)}}),rI,this._client):{data:[]}}_getVideosPaginated(e,t,r={}){return new eq({url:"videos",userId:"user_id"===e?t[0]:void 0,query:_._makeVideosQuery(e,t,r)},this._client,e=>new rI(e,this._client))}static _makeVideosQuery(e,t,r={}){let{language:n,period:i,orderBy:s,type:a}=r;return{[e]:t,language:n,period:i,sort:s,type:a}}};(0,p.gn)([(0,ep._)(!1)],rS.prototype,"_getVideoByIdBatcher",void 0),rS=_=(0,p.gn)([(0,z.P)("api","HelixVideoApi")],rS);let rC=class extends eg{async sendWhisper(e,t,r){await this._client.callApi({type:"helix",url:"whispers",method:"POST",userId:V(e),scopes:["user:manage:whispers"],query:{from_user_id:V(e),to_user_id:V(t)},jsonBody:{message:r}})}};rC=(0,p.gn)([(0,z.P)("api","HelixWhisperApi")],rC);class rA{constructor(e,t,r){this._options=e,this._httpStatus=t,this._resolvedUserId=r}get options(){return this._options}get httpStatus(){return this._httpStatus}get resolvedUserId(){return this._resolvedUserId}}let rB=class extends es{constructor(e,t,r){super(),this.onRequest=this.registerEvent(),this._config=e,this._logger=t,this._rateLimiter=r}async requestScopesForUser(e,t){await this._config.authProvider.getAccessTokenForUser(e,...t.map(e=>[e]))}async getTokenInfo(){try{let e=await this.callApi({type:"auth",url:"validate"});return new eu.s(e)}catch(e){if(e instanceof ea.o&&401===e.statusCode)throw new el._({cause:e});throw e}}async callApi(e){var t;let{authProvider:r}=this._config;if(!(null===(t=e.auth)||void 0===t||t))return await (0,$.C)(e,r.clientId,void 0,void 0,this._config.fetchOptions);let n=!1;if(e.forceType)switch(e.forceType){case"app":{if(!r.getAppAccessToken)throw Error("Tried to make an API call that requires an app access token but your auth provider does not support that");let t=await r.getAppAccessToken();return await this._callApiUsingInitialToken(e,t)}case"user":n=!0;break;default:throw new ed(`Unknown forced token type: ${e.forceType}`)}if(e.scopes&&(n=!0),n){let t=e.canOverrideScopedUserContext?this._getUserIdFromRequestContext(e.userId):e.userId;if(!t)throw Error("Tried to make an API call with a user context but no context user ID");let n=await r.getAccessTokenForUser(t,e.scopes);if(!n)throw Error(`Tried to make an API call with a user context for user ID ${t} but no token was found`);if(ec(n)&&r.refreshAccessTokenForUser){let n=await r.refreshAccessTokenForUser(t);return await this._callApiUsingInitialToken(e,n,!0)}return await this._callApiUsingInitialToken(e,n)}let i=this._getUserIdFromRequestContext(e.userId),s=null===i?await r.getAnyAccessToken():await r.getAnyAccessToken(null!=i?i:e.userId);if(ec(s)&&s.userId&&r.refreshAccessTokenForUser){let t=await r.refreshAccessTokenForUser(s.userId);return await this._callApiUsingInitialToken(e,t,!0)}return await this._callApiUsingInitialToken(e,s)}get bits(){return new eJ(this)}get channels(){return new e$(this)}get channelPoints(){return new eY(this)}get charity(){return new e2(this)}get chat(){return new ti(this)}get clips(){return new to(this)}get contentClassificationLabels(){return new tl(this)}get entitlements(){return new th(this)}get eventSub(){return new tx(this)}get extensions(){return new tB(this)}get games(){return new tP(this)}get hypeTrain(){return new tR(this)}get goals(){return new tD(this)}get moderation(){return new tV(this)}get polls(){return new tQ(this)}get predictions(){return new tX(this)}get raids(){return new t1(this)}get schedule(){return new t7(this)}get search(){return new re(this)}get streams(){return new ru(this)}get subscriptions(){return new rh(this)}get teams(){return new rg(this)}get users(){return new rJ(this)}get videos(){return new rS(this)}get whispers(){return new rC(this)}get rateLimiterStats(){return this._rateLimiter instanceof F?this._rateLimiter.stats:null}get _authProvider(){return this._config.authProvider}get _mockServerPort(){return this._config.mockServerPort}get _batchDelay(){var e;return null!==(e=this._config.batchDelay)&&void 0!==e?e:0}_getUserIdFromRequestContext(e){return e}async _callApiUsingInitialToken(e,t,r=!1){var n;let{authProvider:i}=this._config,{authorizationType:s}=i,a=await this._callApiInternal(e,i.clientId,t.accessToken,s);if(401===a.status&&!r){if(t.userId){if(i.refreshAccessTokenForUser){let r=await i.refreshAccessTokenForUser(t.userId);a=await this._callApiInternal(e,i.clientId,r.accessToken,s)}}else if(i.getAppAccessToken){let t=await i.getAppAccessToken(!0);a=await this._callApiInternal(e,i.clientId,t.accessToken,s)}}return this.emit(this.onRequest,new rA(e,a.status,null!==(n=t.userId)&&void 0!==n?n:null)),await (0,eo.Z)(a,e),await (0,eo.n)(a)}async _callApiInternal(e,t,r,n){var i,s,a;let{fetchOptions:o,mockServerPort:u}=this._config,l=null!==(i=e.type)&&void 0!==i?i:"helix";this._logger.debug(`Calling ${l} API: ${null!==(s=e.method)&&void 0!==s?s:"GET"} ${e.url}`),this._logger.trace(`Query: ${JSON.stringify(e.query)}`),e.jsonBody&&this._logger.trace(`Request body: ${JSON.stringify(e.jsonBody)}`);let c=eh.operation({retries:3,minTimeout:500,factor:2}),{promise:d,resolve:h,reject:_}=en();c.attempt(async()=>{try{let i="helix"===l?await this._rateLimiter.request({options:e,clientId:t,accessToken:r,authorizationType:n,fetchOptions:o,mockServerPort:u}):await (0,$.d)(e,t,r,n,o,u);!i.ok&&i.status>=500&&i.status<600&&await (0,eo.Z)(i,e),h(i)}catch(e){if(c.retry(e))return;_(c.mainError())}});let p=await d;return this._logger.debug(`Called ${l} API: ${null!==(a=e.method)&&void 0!==a?a:"GET"} ${e.url} - result: ${p.status}`),p}};(0,p.gn)([ee()],rB.prototype,"bits",null),(0,p.gn)([ee()],rB.prototype,"channels",null),(0,p.gn)([ee()],rB.prototype,"channelPoints",null),(0,p.gn)([ee()],rB.prototype,"charity",null),(0,p.gn)([ee()],rB.prototype,"chat",null),(0,p.gn)([ee()],rB.prototype,"clips",null),(0,p.gn)([ee()],rB.prototype,"contentClassificationLabels",null),(0,p.gn)([ee()],rB.prototype,"entitlements",null),(0,p.gn)([ee()],rB.prototype,"eventSub",null),(0,p.gn)([ee()],rB.prototype,"extensions",null),(0,p.gn)([ee()],rB.prototype,"games",null),(0,p.gn)([ee()],rB.prototype,"hypeTrain",null),(0,p.gn)([ee()],rB.prototype,"goals",null),(0,p.gn)([ee()],rB.prototype,"moderation",null),(0,p.gn)([ee()],rB.prototype,"polls",null),(0,p.gn)([ee()],rB.prototype,"predictions",null),(0,p.gn)([ee()],rB.prototype,"raids",null),(0,p.gn)([ee()],rB.prototype,"schedule",null),(0,p.gn)([ee()],rB.prototype,"search",null),(0,p.gn)([ee()],rB.prototype,"streams",null),(0,p.gn)([ee()],rB.prototype,"subscriptions",null),(0,p.gn)([ee()],rB.prototype,"teams",null),(0,p.gn)([ee()],rB.prototype,"users",null),(0,p.gn)([ee()],rB.prototype,"videos",null),(0,p.gn)([ee()],rB.prototype,"whispers",null),rB=(0,p.gn)([er,(0,z.P)("api","ApiClient")],rB);let rT=class extends rB{_getUserIdFromRequestContext(){return null}};rT=(0,p.gn)([(0,z.P)("api","ApiClient")],rT);let rP=class extends rB{constructor(e,t,r,n){super(e,t,r),this._userId=n}_getUserIdFromRequestContext(){return this._userId}};rP=(0,p.gn)([(0,z.P)("api","ApiClient")],rP);let rE=class extends rB{constructor(e){if(!e.authProvider)throw new K("No auth provider given. Please supply the `authProvider` option.");let t={name:"twurple:api:rate-limiter",...e.logger};super(e,N({name:"twurple:api:client",...e.logger}),g.U?new H({getPartitionKey:e=>{var t;return null!==(t=e.userId)&&void 0!==t?t:null},createChild:()=>new Z({logger:t})}):new G({logger:t,bucketSize:800,timeFrame:64e3,doRequest:async({options:e,clientId:t,accessToken:r,authorizationType:n,fetchOptions:i,mockServerPort:s})=>await (0,$.d)(e,t,r,n,i,s),getPartitionKey:e=>{var t;return null!==(t=e.userId)&&void 0!==t?t:null}}))}async asUser(e,t){let r=new rP(this._config,this._logger,this._rateLimiter,V(e));return await t(r)}async asIntent(e,t){if(!this._authProvider.getAccessTokenForIntent)throw Error("Trying to use intents with an auth provider that does not support them");for(let r of e){let e=await this._authProvider.getAccessTokenForIntent(r);if(e){let r=new rP(this._config,this._logger,this._rateLimiter,e.userId);return await t(r)}}throw Error(`Intents [${e.join(", ")}] not found in auth provider`)}async withoutUser(e){let t=new rT(this._config,this._logger,this._rateLimiter);return await e(t)}};rE=(0,p.gn)([(0,z.P)("api","ApiClient")],rE)},40321:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var n=r(73660),i=r(25143),s=r(78734),a=r(22870);let o=class extends s.Lo{constructor(e){super(e),this._obtainmentDate=new Date}get clientId(){return this[s.J_].client_id}get userId(){var e;return null!==(e=this[s.J_].user_id)&&void 0!==e?e:null}get userName(){var e;return null!==(e=this[s.J_].login)&&void 0!==e?e:null}get scopes(){return this[s.J_].scopes}get expiryDate(){return(0,i.Ge)(this[s.J_].expires_in,e=>new Date(this._obtainmentDate.getTime()+1e3*e))}};o=(0,n.gn)([(0,a.P)("auth","TokenInfo","clientId")],o)},60340:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var n=r(76159);class i extends n.s{constructor(e){super("Invalid token supplied",e)}}},43128:function(e,t,r){"use strict";r.d(t,{B:function(){return _}});var n=r(73660),i=r(910),s=r(22870),a=r(57706),o=r(6038),u=r(60340),l=r(40321);async function c(e,t){try{let r=await (0,a.C)({type:"auth",url:"validate"},t,e);return new l.s(r)}catch(e){if(e instanceof o.o&&401===e.statusCode)throw new u._({cause:e});throw e}}let d=new Map([["channel_commercial",["channel:edit:commercial"]],["channel_editor",["channel:manage:broadcast"]],["channel_read",["channel:read:stream_key"]],["channel_subscriptions",["channel:read:subscriptions"]],["user_blocks_read",["user:read:blocked_users"]],["user_blocks_edit",["user:manage:blocked_users"]],["user_follows_edit",["user:edit:follows"]],["user_read",["user:read:email"]],["user_subscriptions",["user:read:subscriptions"]],["user:edit:broadcast",["channel:manage:broadcast","channel:manage:extensions"]]]);async function h(e,t,r,n,i){if((null==i?void 0:i.length)||!r){let r=await c(t,e);if(!r.userId)throw Error("Trying to use an app access token as a user access token");let s=null!=n?n:r.scopes;return i&&function(e,t){for(let r of t)!function(e,t){if(null==t?void 0:t.length){let r=new Set(e.flatMap(e=>{var t;return[e,...null!==(t=d.get(e))&&void 0!==t?t:[]]}));if(t.every(e=>!r.has(e))){let e=t.join(", ");throw Error(`This token does not have any of the requested scopes (${e}) and can not be upgraded.
If you need dynamically upgrading scopes, please implement the AuthProvider interface accordingly:

	https://twurple.js.org/reference/auth/interfaces/AuthProvider.html`)}}}(e,r)}(s,i.filter(e=>!!e)),[s,r.userId]}return[n,r]}let _=class{constructor(e,t,r){this._clientId=e||"",this._accessToken="string"==typeof t?{accessToken:t,refreshToken:null,scope:null!=r?r:[],expiresIn:null,obtainmentTimestamp:Date.now()}:t,this._scopes=r}get clientId(){return this._clientId}async getAccessTokenForUser(e,...t){return await this._getAccessToken(t)}async getAccessTokenForIntent(e,...t){return await this._getAccessToken(t)}async getAnyAccessToken(){return await this._getAccessToken()}getCurrentScopesForUser(){var e;return null!==(e=this._scopes)&&void 0!==e?e:[]}async _getAccessToken(e){let[t,r]=await h(this._clientId,this._accessToken.accessToken,this._userId,this._scopes,e);return this._scopes=t,this._userId=r,{...this._accessToken,userId:r}}};(0,n.gn)([(0,i._)(!1)],_.prototype,"_clientId",void 0),(0,n.gn)([(0,i._)(!1)],_.prototype,"_accessToken",void 0),_=(0,n.gn)([(0,s.P)("auth","StaticAuthProvider","clientId")],_)},78734:function(e,t,r){"use strict";r.d(t,{J_:function(){return n},Lo:function(){return i}});let n=Symbol("twurpleRawData");class i{constructor(e){this[n]=e}}},76159:function(e,t,r){"use strict";r.d(t,{s:function(){return n}});class n extends Error{constructor(e,t){var r;super(e,t),Object.setPrototypeOf(this,new.target.prototype),null===(r=Error.captureStackTrace)||void 0===r||r.call(Error,this,new.target.constructor)}get name(){return this.constructor.name}}},22870:function(e,t,r){"use strict";function n(e,t,r){return n=>{Object.defineProperty(n.prototype,Symbol.for("nodejs.util.inspect.custom"),{value:r?function(){return`[${t}#${this[r]} - please check https://twurple.js.org/reference/${e}/classes/${t}.html for available properties]`}:function(){return`[${t} - please check https://twurple.js.org/reference/${e}/classes/${t}.html for available properties]`},enumerable:!1})}}r.d(t,{P:function(){return n}})},78604:function(e,t,r){"use strict";r.d(t,{vM:function(){return t1}});var n={};r.r(n),r.d(n,{VERSION:function(){return i},after:function(){return tb},all:function(){return tM},allKeys:function(){return e_},any:function(){return tF},assign:function(){return eE},before:function(){return tx},bind:function(){return tl},bindAll:function(){return th},chain:function(){return ts},chunk:function(){return rp},clone:function(){return eR},collect:function(){return tR},compact:function(){return rn},compose:function(){return tw},constant:function(){return Z},contains:function(){return tH},countBy:function(){return t3},create:function(){return eq},debounce:function(){return ty},default:function(){return ry},defaults:function(){return eD},defer:function(){return tg},delay:function(){return tp},detect:function(){return tD},difference:function(){return rs},drop:function(){return rt},each:function(){return tq},escape:function(){return e3},every:function(){return tM},extend:function(){return eP},extendOwn:function(){return eE},filter:function(){return tL},find:function(){return tD},findIndex:function(){return tC},findKey:function(){return tI},findLastIndex:function(){return tA},findWhere:function(){return tU},first:function(){return re},flatten:function(){return ri},foldl:function(){return tO},foldr:function(){return tN},forEach:function(){return tq},functions:function(){return eB},get:function(){return ej},groupBy:function(){return t1},has:function(){return eM},head:function(){return re},identity:function(){return eF},include:function(){return tH},includes:function(){return tH},indexBy:function(){return t2},indexOf:function(){return tP},initial:function(){return t5},inject:function(){return tO},intersection:function(){return rl},invert:function(){return eA},invoke:function(){return tG},isArguments:function(){return z},isArray:function(){return $},isArrayBuffer:function(){return k},isBoolean:function(){return A},isDataView:function(){return G},isDate:function(){return D},isElement:function(){return B},isEmpty:function(){return eo},isEqual:function(){return eh},isError:function(){return q},isFinite:function(){return Q},isFunction:function(){return L},isMap:function(){return eb},isMatch:function(){return eu},isNaN:function(){return K},isNull:function(){return S},isNumber:function(){return E},isObject:function(){return I},isRegExp:function(){return U},isSet:function(){return eJ},isString:function(){return P},isSymbol:function(){return R},isTypedArray:function(){return en},isUndefined:function(){return C},isWeakMap:function(){return ex},isWeakSet:function(){return eI},iteratee:function(){return eW},keys:function(){return ea},last:function(){return rr},lastIndexOf:function(){return tE},map:function(){return tR},mapObject:function(){return eQ},matcher:function(){return eH},matches:function(){return eH},max:function(){return tW},memoize:function(){return t_},methods:function(){return eB},min:function(){return tz},mixin:function(){return rm},negate:function(){return tv},noop:function(){return eK},now:function(){return e0},object:function(){return rh},omit:function(){return t9},once:function(){return tJ},pairs:function(){return eC},partial:function(){return tu},partition:function(){return t8},pick:function(){return t7},pluck:function(){return t$},property:function(){return eG},propertyOf:function(){return eZ},random:function(){return eX},range:function(){return r_},reduce:function(){return tO},reduceRight:function(){return tN},reject:function(){return tj},rest:function(){return rt},restArguments:function(){return J},result:function(){return tr},sample:function(){return tZ},select:function(){return tL},shuffle:function(){return tY},size:function(){return t4},some:function(){return tF},sortBy:function(){return tX},sortedIndex:function(){return tB},tail:function(){return rt},take:function(){return re},tap:function(){return ek},template:function(){return tt},templateSettings:function(){return e4},throttle:function(){return tm},times:function(){return eY},toArray:function(){return tK},toPath:function(){return eO},transpose:function(){return rc},unescape:function(){return e8},union:function(){return ru},uniq:function(){return ro},unique:function(){return ro},uniqueId:function(){return ti},unzip:function(){return rc},values:function(){return eS},where:function(){return tV},without:function(){return ra},wrap:function(){return tf},zip:function(){return rd}});var i="1.13.6",s="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},a=Array.prototype,o=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,l=a.push,c=a.slice,d=o.toString,h=o.hasOwnProperty,_="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,g=Array.isArray,m=Object.keys,y=Object.create,f=_&&ArrayBuffer.isView,v=isNaN,w=isFinite,b=!({toString:null}).propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function J(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=n,e.apply(this,s)}}function I(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function S(e){return null===e}function C(e){return void 0===e}function A(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)}function B(e){return!!(e&&1===e.nodeType)}function T(e){var t="[object "+e+"]";return function(e){return d.call(e)===t}}var P=T("String"),E=T("Number"),D=T("Date"),U=T("RegExp"),q=T("Error"),R=T("Symbol"),k=T("ArrayBuffer"),O=T("Function"),N=s.document&&s.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof N&&(O=function(e){return"function"==typeof e});var L=O,j=T("Object"),M=p&&j(new DataView(new ArrayBuffer(8))),F="undefined"!=typeof Map&&j(new Map),H=T("DataView"),G=M?function(e){return null!=e&&L(e.getInt8)&&k(e.buffer)}:H,$=g||T("Array");function V(e,t){return null!=e&&h.call(e,t)}var W=T("Arguments");!function(){W(arguments)||(W=function(e){return V(e,"callee")})}();var z=W;function Q(e){return!R(e)&&w(e)&&!isNaN(parseFloat(e))}function K(e){return E(e)&&v(e)}function Z(e){return function(){return e}}function Y(e){return function(t){var r=e(t);return"number"==typeof r&&r>=0&&r<=9007199254740991}}function X(e){return function(t){return null==t?void 0:t[e]}}var ee=X("byteLength"),et=Y(ee),er=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,en=_?function(e){return f?f(e)&&!G(e):et(e)&&er.test(d.call(e))}:Z(!1),ei=X("length");function es(e,t){t=function(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(e){return!0===t[e]},push:function(r){return t[r]=!0,e.push(r)}}}(t);var r=x.length,n=e.constructor,i=L(n)&&n.prototype||o,s="constructor";for(V(e,s)&&!t.contains(s)&&t.push(s);r--;)(s=x[r])in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function ea(e){if(!I(e))return[];if(m)return m(e);var t=[];for(var r in e)V(e,r)&&t.push(r);return b&&es(e,t),t}function eo(e){if(null==e)return!0;var t=ei(e);return"number"==typeof t&&($(e)||P(e)||z(e))?0===t:0===ei(ea(e))}function eu(e,t){var r=ea(t),n=r.length;if(null==e)return!n;for(var i=Object(e),s=0;s<n;s++){var a=r[s];if(t[a]!==i[a]||!(a in i))return!1}return!0}function el(e){return e instanceof el?e:this instanceof el?void(this._wrapped=e):new el(e)}function ec(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,ee(e))}el.VERSION=i,el.prototype.value=function(){return this._wrapped},el.prototype.valueOf=el.prototype.toJSON=el.prototype.value,el.prototype.toString=function(){return String(this._wrapped)};var ed="[object DataView]";function eh(e,t){return function e(t,r,n,i){if(t===r)return 0!==t||1/t==1/r;if(null==t||null==r)return!1;if(t!=t)return r!=r;var s=typeof t;return("function"===s||"object"===s||"object"==typeof r)&&function t(r,n,i,s){r instanceof el&&(r=r._wrapped),n instanceof el&&(n=n._wrapped);var a=d.call(r);if(a!==d.call(n))return!1;if(M&&"[object Object]"==a&&G(r)){if(!G(n))return!1;a=ed}switch(a){case"[object RegExp]":case"[object String]":return""+r==""+n;case"[object Number]":if(+r!=+r)return+n!=+n;return 0==+r?1/+r==1/n:+r==+n;case"[object Date]":case"[object Boolean]":return+r==+n;case"[object Symbol]":return u.valueOf.call(r)===u.valueOf.call(n);case"[object ArrayBuffer]":case ed:return t(ec(r),ec(n),i,s)}var o="[object Array]"===a;if(!o&&en(r)){if(ee(r)!==ee(n))return!1;if(r.buffer===n.buffer&&r.byteOffset===n.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof r||"object"!=typeof n)return!1;var l=r.constructor,c=n.constructor;if(l!==c&&!(L(l)&&l instanceof l&&L(c)&&c instanceof c)&&"constructor"in r&&"constructor"in n)return!1}s=s||[];for(var h=(i=i||[]).length;h--;)if(i[h]===r)return s[h]===n;if(i.push(r),s.push(n),o){if((h=r.length)!==n.length)return!1;for(;h--;)if(!e(r[h],n[h],i,s))return!1}else{var _,p=ea(r);if(h=p.length,ea(n).length!==h)return!1;for(;h--;)if(!(V(n,_=p[h])&&e(r[_],n[_],i,s)))return!1}return i.pop(),s.pop(),!0}(t,r,n,i)}(e,t)}function e_(e){if(!I(e))return[];var t=[];for(var r in e)t.push(r);return b&&es(e,t),t}function ep(e){var t=ei(e);return function(r){if(null==r||ei(e_(r)))return!1;for(var n=0;n<t;n++)if(!L(r[e[n]]))return!1;return e!==ev||!L(r[eg])}}var eg="forEach",em=["clear","delete"],ey=["get","has","set"],ef=em.concat(eg,ey),ev=em.concat(ey),ew=["add"].concat(em,eg,"has"),eb=F?ep(ef):T("Map"),ex=F?ep(ev):T("WeakMap"),eJ=F?ep(ew):T("Set"),eI=T("WeakSet");function eS(e){for(var t=ea(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function eC(e){for(var t=ea(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function eA(e){for(var t={},r=ea(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function eB(e){var t=[];for(var r in e)L(e[r])&&t.push(r);return t.sort()}function eT(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var s=arguments[i],a=e(s),o=a.length,u=0;u<o;u++){var l=a[u];t&&void 0!==r[l]||(r[l]=s[l])}return r}}var eP=eT(e_),eE=eT(ea),eD=eT(e_,!0);function eU(e){if(!I(e))return{};if(y)return y(e);var t=function(){};t.prototype=e;var r=new t;return t.prototype=null,r}function eq(e,t){var r=eU(e);return t&&eE(r,t),r}function eR(e){return I(e)?$(e)?e.slice():eP({},e):e}function ek(e,t){return t(e),e}function eO(e){return $(e)?e:[e]}function eN(e){return el.toPath(e)}function eL(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}function ej(e,t,r){var n=eL(e,eN(t));return C(n)?r:n}function eM(e,t){for(var r=(t=eN(t)).length,n=0;n<r;n++){var i=t[n];if(!V(e,i))return!1;e=e[i]}return!!r}function eF(e){return e}function eH(e){return e=eE({},e),function(t){return eu(t,e)}}function eG(e){return e=eN(e),function(t){return eL(t,e)}}function e$(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,s){return e.call(t,r,n,i,s)}}return function(){return e.apply(t,arguments)}}function eV(e,t,r){return null==e?eF:L(e)?e$(e,t,r):I(e)&&!$(e)?eH(e):eG(e)}function eW(e,t){return eV(e,t,1/0)}function ez(e,t,r){return el.iteratee!==eW?el.iteratee(e,t):eV(e,t,r)}function eQ(e,t,r){t=ez(t,r);for(var n=ea(e),i=n.length,s={},a=0;a<i;a++){var o=n[a];s[o]=t(e[o],o,e)}return s}function eK(){}function eZ(e){return null==e?eK:function(t){return ej(e,t)}}function eY(e,t,r){var n=Array(Math.max(0,e));t=e$(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function eX(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}el.toPath=eO,el.iteratee=eW;var e0=Date.now||function(){return new Date().getTime()};function e1(e){var t=function(t){return e[t]},r="(?:"+ea(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}}var e2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e3=e1(e2),e8=e1(eA(e2)),e4=el.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},e6=/(.)^/,e7={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},e9=/\\|'|\r|\n|\u2028|\u2029/g;function e5(e){return"\\"+e7[e]}var te=/^\s*(\w|\$)+\s*$/;function tt(e,t,r){!t&&r&&(t=r);var n,i=RegExp([((t=eD({},t,el.templateSettings)).escape||e6).source,(t.interpolate||e6).source,(t.evaluate||e6).source].join("|")+"|$","g"),s=0,a="__p+='";e.replace(i,function(t,r,n,i,o){return a+=e.slice(s,o).replace(e9,e5),s=o+t.length,r?a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n";var o=t.variable;if(o){if(!te.test(o))throw Error("variable is not a bare identifier: "+o)}else a="with(obj||{}){\n"+a+"}\n",o="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=Function(o,"_",a)}catch(e){throw e.source=a,e}var u=function(e){return n.call(this,e,el)};return u.source="function("+o+"){\n"+a+"}",u}function tr(e,t,r){var n=(t=eN(t)).length;if(!n)return L(r)?r.call(e):r;for(var i=0;i<n;i++){var s=null==e?void 0:e[t[i]];void 0===s&&(s=r,i=n),e=L(s)?s.call(e):s}return e}var tn=0;function ti(e){var t=++tn+"";return e?e+t:t}function ts(e){var t=el(e);return t._chain=!0,t}function ta(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=eU(e.prototype),a=e.apply(s,i);return I(a)?a:s}var to=J(function(e,t){var r=to.placeholder,n=function(){for(var i=0,s=t.length,a=Array(s),o=0;o<s;o++)a[o]=t[o]===r?arguments[i++]:t[o];for(;i<arguments.length;)a.push(arguments[i++]);return ta(e,n,this,this,a)};return n});to.placeholder=el;var tu=to,tl=J(function(e,t,r){if(!L(e))throw TypeError("Bind must be called on a function");var n=J(function(i){return ta(e,n,t,this,r.concat(i))});return n}),tc=Y(ei);function td(e,t,r,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var i=n.length,s=0,a=ei(e);s<a;s++){var o=e[s];if(tc(o)&&($(o)||z(o))){if(t>1)td(o,t-1,r,n),i=n.length;else for(var u=0,l=o.length;u<l;)n[i++]=o[u++]}else r||(n[i++]=o)}return n}var th=J(function(e,t){var r=(t=td(t,!1,!1)).length;if(r<1)throw Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=tl(e[n],e)}return e});function t_(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return V(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r}var tp=J(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),tg=tu(tp,el,1);function tm(e,t,r){var n,i,s,a,o=0;r||(r={});var u=function(){o=!1===r.leading?0:e0(),n=null,a=e.apply(i,s),n||(i=s=null)},l=function(){var l=e0();o||!1!==r.leading||(o=l);var c=t-(l-o);return i=this,s=arguments,c<=0||c>t?(n&&(clearTimeout(n),n=null),o=l,a=e.apply(i,s),n||(i=s=null)):n||!1===r.trailing||(n=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(n),o=0,n=i=s=null},l}function ty(e,t,r){var n,i,s,a,o,u=function(){var l=e0()-i;t>l?n=setTimeout(u,t-l):(n=null,r||(a=e.apply(o,s)),n||(s=o=null))},l=J(function(l){return o=this,s=l,i=e0(),!n&&(n=setTimeout(u,t),r&&(a=e.apply(o,s))),a});return l.cancel=function(){clearTimeout(n),n=s=o=null},l}function tf(e,t){return tu(t,e)}function tv(e){return function(){return!e.apply(this,arguments)}}function tw(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function tb(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function tx(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var tJ=tu(tx,2);function tI(e,t,r){t=ez(t,r);for(var n,i=ea(e),s=0,a=i.length;s<a;s++)if(t(e[n=i[s]],n,e))return n}function tS(e){return function(t,r,n){r=ez(r,n);for(var i=ei(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return -1}}var tC=tS(1),tA=tS(-1);function tB(e,t,r,n){for(var i=(r=ez(r,n,1))(t),s=0,a=ei(e);s<a;){var o=Math.floor((s+a)/2);r(e[o])<i?s=o+1:a=o}return s}function tT(e,t,r){return function(n,i,s){var a=0,o=ei(n);if("number"==typeof s)e>0?a=s>=0?s:Math.max(s+o,a):o=s>=0?Math.min(s+1,o):s+o+1;else if(r&&s&&o)return s=r(n,i),n[s]===i?s:-1;if(i!=i)return(s=t(c.call(n,a,o),K))>=0?s+a:-1;for(s=e>0?a:o-1;s>=0&&s<o;s+=e)if(n[s]===i)return s;return -1}}var tP=tT(1,tC,tB),tE=tT(-1,tA);function tD(e,t,r){var n=(tc(e)?tC:tI)(e,t,r);if(void 0!==n&&-1!==n)return e[n]}function tU(e,t){return tD(e,eH(t))}function tq(e,t,r){if(t=e$(t,r),tc(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var n,i,s=ea(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e}function tR(e,t,r){t=ez(t,r);for(var n=!tc(e)&&ea(e),i=(n||e).length,s=Array(i),a=0;a<i;a++){var o=n?n[a]:a;s[a]=t(e[o],o,e)}return s}function tk(e){var t=function(t,r,n,i){var s=!tc(t)&&ea(t),a=(s||t).length,o=e>0?0:a-1;for(i||(n=t[s?s[o]:o],o+=e);o>=0&&o<a;o+=e){var u=s?s[o]:o;n=r(n,t[u],u,t)}return n};return function(e,r,n,i){var s=arguments.length>=3;return t(e,e$(r,i,4),n,s)}}var tO=tk(1),tN=tk(-1);function tL(e,t,r){var n=[];return t=ez(t,r),tq(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function tj(e,t,r){return tL(e,tv(ez(t)),r)}function tM(e,t,r){t=ez(t,r);for(var n=!tc(e)&&ea(e),i=(n||e).length,s=0;s<i;s++){var a=n?n[s]:s;if(!t(e[a],a,e))return!1}return!0}function tF(e,t,r){t=ez(t,r);for(var n=!tc(e)&&ea(e),i=(n||e).length,s=0;s<i;s++){var a=n?n[s]:s;if(t(e[a],a,e))return!0}return!1}function tH(e,t,r,n){return tc(e)||(e=eS(e)),("number"!=typeof r||n)&&(r=0),tP(e,t,r)>=0}var tG=J(function(e,t,r){var n,i;return L(t)?i=t:(n=(t=eN(t)).slice(0,-1),t=t[t.length-1]),tR(e,function(e){var s=i;if(!s){if(n&&n.length&&(e=eL(e,n)),null==e)return;s=e[t]}return null==s?s:s.apply(e,r)})});function t$(e,t){return tR(e,eG(t))}function tV(e,t){return tL(e,eH(t))}function tW(e,t,r){var n,i,s=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=tc(e)?e:eS(e);for(var o=0,u=e.length;o<u;o++)null!=(n=e[o])&&n>s&&(s=n)}else t=ez(t,r),tq(e,function(e,r,n){((i=t(e,r,n))>a||i===-1/0&&s===-1/0)&&(s=e,a=i)});return s}function tz(e,t,r){var n,i,s=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=tc(e)?e:eS(e);for(var o=0,u=e.length;o<u;o++)null!=(n=e[o])&&n<s&&(s=n)}else t=ez(t,r),tq(e,function(e,r,n){((i=t(e,r,n))<a||i===1/0&&s===1/0)&&(s=e,a=i)});return s}var tQ=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function tK(e){return e?$(e)?c.call(e):P(e)?e.match(tQ):tc(e)?tR(e,eF):eS(e):[]}function tZ(e,t,r){if(null==t||r)return tc(e)||(e=eS(e)),e[eX(e.length-1)];var n=tK(e),i=ei(n);t=Math.max(Math.min(t,i),0);for(var s=i-1,a=0;a<t;a++){var o=eX(a,s),u=n[a];n[a]=n[o],n[o]=u}return n.slice(0,t)}function tY(e){return tZ(e,1/0)}function tX(e,t,r){var n=0;return t=ez(t,r),t$(tR(e,function(e,r,i){return{value:e,index:n++,criteria:t(e,r,i)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return -1}return e.index-t.index}),"value")}function t0(e,t){return function(r,n,i){var s=t?[[],[]]:{};return n=ez(n,i),tq(r,function(t,i){var a=n(t,i,r);e(s,t,a)}),s}}var t1=t0(function(e,t,r){V(e,r)?e[r].push(t):e[r]=[t]}),t2=t0(function(e,t,r){e[r]=t}),t3=t0(function(e,t,r){V(e,r)?e[r]++:e[r]=1}),t8=t0(function(e,t,r){e[r?0:1].push(t)},!0);function t4(e){return null==e?0:tc(e)?e.length:ea(e).length}function t6(e,t,r){return t in r}var t7=J(function(e,t){var r={},n=t[0];if(null==e)return r;L(n)?(t.length>1&&(n=e$(n,t[1])),t=e_(e)):(n=t6,t=td(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var a=t[i],o=e[a];n(o,a,e)&&(r[a]=o)}return r}),t9=J(function(e,t){var r,n=t[0];return L(n)?(n=tv(n),t.length>1&&(r=t[1])):(t=tR(td(t,!1,!1),String),n=function(e,r){return!tH(t,r)}),t7(e,n,r)});function t5(e,t,r){return c.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function re(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[0]:t5(e,e.length-t)}function rt(e,t,r){return c.call(e,null==t||r?1:t)}function rr(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[e.length-1]:rt(e,Math.max(0,e.length-t))}function rn(e){return tL(e,Boolean)}function ri(e,t){return td(e,t,!1)}var rs=J(function(e,t){return t=td(t,!0,!0),tL(e,function(e){return!tH(t,e)})}),ra=J(function(e,t){return rs(e,t)});function ro(e,t,r,n){A(t)||(n=r,r=t,t=!1),null!=r&&(r=ez(r,n));for(var i=[],s=[],a=0,o=ei(e);a<o;a++){var u=e[a],l=r?r(u,a,e):u;t&&!r?(a&&s===l||i.push(u),s=l):r?tH(s,l)||(s.push(l),i.push(u)):tH(i,u)||i.push(u)}return i}var ru=J(function(e){return ro(td(e,!0,!0))});function rl(e){for(var t=[],r=arguments.length,n=0,i=ei(e);n<i;n++){var s,a=e[n];if(!tH(t,a)){for(s=1;s<r&&tH(arguments[s],a);s++);s===r&&t.push(a)}}return t}function rc(e){for(var t=e&&tW(e,ei).length||0,r=Array(t),n=0;n<t;n++)r[n]=t$(e,n);return r}var rd=J(rc);function rh(e,t){for(var r={},n=0,i=ei(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function r_(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i}function rp(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(c.call(e,n,n+=t));return r}function rg(e,t){return e._chain?el(t).chain():t}function rm(e){return tq(eB(e),function(t){var r=el[t]=e[t];el.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),rg(this,r.apply(el,e))}}),el}tq(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];el.prototype[e]=function(){var r=this._wrapped;return null!=r&&(t.apply(r,arguments),("shift"===e||"splice"===e)&&0===r.length&&delete r[0]),rg(this,r)}}),tq(["concat","join","slice"],function(e){var t=a[e];el.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),rg(this,e)}});var ry=el,rf=rm(n);rf._=rf}}]);